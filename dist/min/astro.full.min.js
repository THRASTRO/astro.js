/* autogenerated by webmerge (compile context) */
;
/*
Astronomical Calculations (https://github.com/mgreter/astro.js)
- Copyright (c) 2017 Marcel Greter (http://github.com/mgreter)
*/;
/* Vector3 implementation included */;
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.owns=function(m,p){return Object.prototype.hasOwnProperty.call(m,p)};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(m,p,x){m!=Array.prototype&&m!=Object.prototype&&(m[p]=x.value)};$jscomp.getGlobal=function(m){return"undefined"!=typeof window&&window===m?m:"undefined"!=typeof global&&null!=global?global:m};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(m,p,x,B){if(p){x=$jscomp.global;m=m.split(".");for(B=0;B<m.length-1;B++){var C=m[B];C in x||(x[C]={});x=x[C]}m=m[m.length-1];B=x[m];p=p(B);p!=B&&null!=p&&$jscomp.defineProperty(x,m,{configurable:!0,writable:!0,value:p})}};$jscomp.polyfill("Object.assign",function(m){return m?m:function(m,x){for(var p=1;p<arguments.length;p++){var C=arguments[p];if(C)for(var w in C)$jscomp.owns(C,w)&&(m[w]=C[w])}return m}},"es6-impl","es3");
$jscomp.polyfill("Number.EPSILON",function(m){return Math.pow(2,-52)},"es6-impl","es3");$jscomp.polyfill("Math.cbrt",function(m){return m?m:function(m){if(0===m)return m;m=Number(m);var p=Math.pow(Math.abs(m),1/3);return 0>m?-p:p}},"es6-impl","es3");
(function(m){if(!this.THREE){var p=function(a,b,c,d){this._x=a||0;this._y=b||0;this._z=c||0;this._order=d||p.DefaultOrder};var x=function(a,b,c,d){this._x=a||0;this._y=b||0;this._z=c||0;this._w=void 0!==d?d:1};var B=function(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];0<arguments.length&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")};var C=function(){this.elements=[1,0,0,0,1,0,0,0,1];0<arguments.length&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")};
var w=function(a,b,c){this.x=a||0;this.y=b||0;this.z=c||0};var M={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),b=Array(36),c=0,d;return function(){for(var e=0;36>e;e++)8===e||13===e||18===e||23===e?b[e]="-":14===e?b[e]="4":(2>=c&&(c=33554432+16777216*Math.random()|0),d=c&15,c>>=4,b[e]=a[19===e?d&3|8:d]);return b.join("")}}(),clamp:function(a,b,c){return Math.max(b,Math.min(c,a))},euclideanModulo:function(a,
b){return(a%b+b)%b},mapLinear:function(a,b,c,d,e){return d+(a-b)*(e-d)/(c-b)},lerp:function(a,b,c){return(1-c)*a+c*b},smoothstep:function(a,b,c){if(a<=b)return 0;if(a>=c)return 1;a=(a-b)/(c-b);return a*a*(3-2*a)},smootherstep:function(a,b,c){if(a<=b)return 0;if(a>=c)return 1;a=(a-b)/(c-b);return a*a*a*(a*(6*a-15)+10)},randInt:function(a,b){return a+Math.floor(Math.random()*(b-a+1))},randFloat:function(a,b){return a+Math.random()*(b-a)},randFloatSpread:function(a){return a*(.5-Math.random())},degToRad:function(a){return a*
M.DEG2RAD},radToDeg:function(a){return a*M.RAD2DEG},isPowerOfTwo:function(a){return 0===(a&a-1)&&0!==a},nearestPowerOfTwo:function(a){return Math.pow(2,Math.round(Math.log(a)/Math.LN2))},nextPowerOfTwo:function(a){a--;a|=a>>1;a|=a>>2;a|=a>>4;a|=a>>8;a|=a>>16;a++;return a}};p.RotationOrders="XYZ YZX ZXY XZY YXZ ZYX".split(" ");p.DefaultOrder="XYZ";Object.assign(w.prototype,{isVector3:!0,set:function(a,b,c){this.x=a;this.y=b;this.z=c;return this},setScalar:function(a){this.z=this.y=this.x=a;return this},
setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setZ:function(a){this.z=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;case 2:this.z=b;break;default:throw Error("index is out of range: "+a);}return this},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw Error("index is out of range: "+a);}},clone:function(){return new this.constructor(this.x,this.y,this.z)},
copy:function(a){this.x=a.x;this.y=a.y;this.z=a.z;return this},add:function(a,b){if(void 0!==b)return console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;this.z+=a.z;return this},addScalar:function(a){this.x+=a;this.y+=a;this.z+=a;return this},addVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;return this},addScaledVector:function(a,b){this.x+=a.x*b;this.y+=a.y*b;this.z+=a.z*b;return this},
sub:function(a,b){if(void 0!==b)return console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,b);this.x-=a.x;this.y-=a.y;this.z-=a.z;return this},subScalar:function(a){this.x-=a;this.y-=a;this.z-=a;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z;return this},multiply:function(a,b){if(void 0!==b)return console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),
this.multiplyVectors(a,b);this.x*=a.x;this.y*=a.y;this.z*=a.z;return this},multiplyScalar:function(a){this.x*=a;this.y*=a;this.z*=a;return this},multiplyVectors:function(a,b){this.x=a.x*b.x;this.y=a.y*b.y;this.z=a.z*b.z;return this},applyEuler:function(){var a=new x;return function(b){b&&b.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order.");return this.applyQuaternion(a.setFromEuler(b))}}(),applyAxisAngle:function(){var a=new x;return function(b,
c){return this.applyQuaternion(a.setFromAxisAngle(b,c))}}(),applyMatrix3:function(a){var b=this.x,c=this.y,d=this.z;a=a.elements;this.x=a[0]*b+a[3]*c+a[6]*d;this.y=a[1]*b+a[4]*c+a[7]*d;this.z=a[2]*b+a[5]*c+a[8]*d;return this},applyMatrix4:function(a){var b=this.x,c=this.y,d=this.z;a=a.elements;var e=1/(a[3]*b+a[7]*c+a[11]*d+a[15]);this.x=(a[0]*b+a[4]*c+a[8]*d+a[12])*e;this.y=(a[1]*b+a[5]*c+a[9]*d+a[13])*e;this.z=(a[2]*b+a[6]*c+a[10]*d+a[14])*e;return this},applyQuaternion:function(a){var b=this.x,
c=this.y,d=this.z,e=a.x,g=a.y,f=a.z;a=a.w;var h=a*b+g*d-f*c,k=a*c+f*b-e*d,l=a*d+e*c-g*b,b=-e*b-g*c-f*d;this.x=h*a+b*-e+k*-f-l*-g;this.y=k*a+b*-g+l*-e-h*-f;this.z=l*a+b*-f+h*-g-k*-e;return this},project:function(){var a=new B;return function(b){a.multiplyMatrices(b.projectionMatrix,a.getInverse(b.matrixWorld));return this.applyMatrix4(a)}}(),unproject:function(){var a=new B;return function(b){a.multiplyMatrices(b.matrixWorld,a.getInverse(b.projectionMatrix));return this.applyMatrix4(a)}}(),transformDirection:function(a){var b=
this.x,c=this.y,d=this.z;a=a.elements;this.x=a[0]*b+a[4]*c+a[8]*d;this.y=a[1]*b+a[5]*c+a[9]*d;this.z=a[2]*b+a[6]*c+a[10]*d;return this.normalize()},divide:function(a){this.x/=a.x;this.y/=a.y;this.z/=a.z;return this},divideScalar:function(a){return this.multiplyScalar(1/a)},min:function(a){this.x=Math.min(this.x,a.x);this.y=Math.min(this.y,a.y);this.z=Math.min(this.z,a.z);return this},max:function(a){this.x=Math.max(this.x,a.x);this.y=Math.max(this.y,a.y);this.z=Math.max(this.z,a.z);return this},clamp:function(a,
b){this.x=Math.max(a.x,Math.min(b.x,this.x));this.y=Math.max(a.y,Math.min(b.y,this.y));this.z=Math.max(a.z,Math.min(b.z,this.z));return this},clampScalar:function(){var a=new w,b=new w;return function(c,d){a.set(c,c,c);b.set(d,d,d);return this.clamp(a,b)}}(),clampLength:function(a,b){var c=this.length();return this.divideScalar(c||1).multiplyScalar(Math.max(a,Math.min(b,c)))},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);return this},ceil:function(){this.x=
Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);return this},roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z);return this},negate:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;return this},dot:function(a){return this.x*a.x+this.y*
a.y+this.z*a.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(a){return this.normalize().multiplyScalar(a)},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;this.z+=(a.z-this.z)*b;return this},lerpVectors:function(a,
b,c){return this.subVectors(b,a).multiplyScalar(c).add(a)},cross:function(a,b){if(void 0!==b)return console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(a,b);var c=this.x,d=this.y,e=this.z;this.x=d*a.z-e*a.y;this.y=e*a.x-c*a.z;this.z=c*a.y-d*a.x;return this},crossVectors:function(a,b){var c=a.x,d=a.y,e=a.z,g=b.x,f=b.y,h=b.z;this.x=d*h-e*f;this.y=e*g-c*h;this.z=c*f-d*g;return this},projectOnVector:function(a){var b=a.dot(this)/
a.lengthSq();return this.copy(a).multiplyScalar(b)},projectOnPlane:function(){var a=new w;return function(b){a.copy(this).projectOnVector(b);return this.sub(a)}}(),reflect:function(){var a=new w;return function(b){return this.sub(a.copy(b).multiplyScalar(2*this.dot(b)))}}(),angleTo:function(a){a=this.dot(a)/Math.sqrt(this.lengthSq()*a.lengthSq());return Math.acos(M.clamp(a,-1,1))},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){var b=this.x-a.x,c=
this.y-a.y;a=this.z-a.z;return b*b+c*c+a*a},distanceToManhattan:function(a){return Math.abs(this.x-a.x)+Math.abs(this.y-a.y)+Math.abs(this.z-a.z)},setFromSpherical:function(a){var b=Math.sin(a.phi)*a.radius;this.x=b*Math.sin(a.theta);this.y=Math.cos(a.phi)*a.radius;this.z=b*Math.cos(a.theta);return this},setFromCylindrical:function(a){this.x=a.radius*Math.sin(a.theta);this.y=a.y;this.z=a.radius*Math.cos(a.theta);return this},setFromMatrixPosition:function(a){a=a.elements;this.x=a[12];this.y=a[13];
this.z=a[14];return this},setFromMatrixScale:function(a){var b=this.setFromMatrixColumn(a,0).length(),c=this.setFromMatrixColumn(a,1).length();a=this.setFromMatrixColumn(a,2).length();this.x=b;this.y=c;this.z=a;return this},setFromMatrixColumn:function(a,b){return this.fromArray(a.elements,4*b)},equals:function(a){return a.x===this.x&&a.y===this.y&&a.z===this.z},fromArray:function(a,b){void 0===b&&(b=0);this.x=a[b];this.y=a[b+1];this.z=a[b+2];return this},toArray:function(a,b){void 0===a&&(a=[]);
void 0===b&&(b=0);a[b]=this.x;a[b+1]=this.y;a[b+2]=this.z;return a},fromBufferAttribute:function(a,b,c){void 0!==c&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute().");this.x=a.getX(b);this.y=a.getY(b);this.z=a.getZ(b);return this}});Object.assign(C.prototype,{isMatrix3:!0,set:function(a,b,c,d,e,g,f,h,k){var l=this.elements;l[0]=a;l[1]=d;l[2]=f;l[3]=b;l[4]=e;l[5]=h;l[6]=c;l[7]=g;l[8]=k;return this},identity:function(){this.set(1,0,0,0,1,0,0,0,1);return this},clone:function(){return(new this.constructor).fromArray(this.elements)},
copy:function(a){var b=this.elements;a=a.elements;b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];return this},setFromMatrix4:function(a){a=a.elements;this.set(a[0],a[4],a[8],a[1],a[5],a[9],a[2],a[6],a[10]);return this},applyToBufferAttribute:function(){var a=new w;return function(b){for(var c=0,d=b.count;c<d;c++)a.x=b.getX(c),a.y=b.getY(c),a.z=b.getZ(c),a.applyMatrix3(this),b.setXYZ(c,a.x,a.y,a.z);return b}}(),multiply:function(a){return this.multiplyMatrices(this,
a)},premultiply:function(a){return this.multiplyMatrices(a,this)},multiplyMatrices:function(a,b){var c=a.elements,d=b.elements,e=this.elements,g=c[0],f=c[3],h=c[6],k=c[1],l=c[4],n=c[7],u=c[2],v=c[5],c=c[8],q=d[0],F=d[3],t=d[6],r=d[1],m=d[4],y=d[7],p=d[2],w=d[5],d=d[8];e[0]=g*q+f*r+h*p;e[3]=g*F+f*m+h*w;e[6]=g*t+f*y+h*d;e[1]=k*q+l*r+n*p;e[4]=k*F+l*m+n*w;e[7]=k*t+l*y+n*d;e[2]=u*q+v*r+c*p;e[5]=u*F+v*m+c*w;e[8]=u*t+v*y+c*d;return this},multiplyScalar:function(a){var b=this.elements;b[0]*=a;b[3]*=a;b[6]*=
a;b[1]*=a;b[4]*=a;b[7]*=a;b[2]*=a;b[5]*=a;b[8]*=a;return this},determinant:function(){var a=this.elements,b=a[0],c=a[1],d=a[2],e=a[3],g=a[4],f=a[5],h=a[6],k=a[7],a=a[8];return b*g*a-b*f*k-c*e*a+c*f*h+d*e*k-d*g*h},getInverse:function(a,b){a&&a.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var c=a.elements,d=this.elements,e=c[0],g=c[1],f=c[2],h=c[3],k=c[4],l=c[5],n=c[6],u=c[7],c=c[8],v=c*k-l*u,q=l*n-c*h,F=u*h-k*n,t=e*v+g*q+f*F;if(0===t){if(!0===b)throw Error("THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0");
console.warn("THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0");return this.identity()}t=1/t;d[0]=v*t;d[1]=(f*u-c*g)*t;d[2]=(l*g-f*k)*t;d[3]=q*t;d[4]=(c*e-f*n)*t;d[5]=(f*h-l*e)*t;d[6]=F*t;d[7]=(g*n-u*e)*t;d[8]=(k*e-g*h)*t;return this},transpose:function(){var a=this.elements;var b=a[1];a[1]=a[3];a[3]=b;b=a[2];a[2]=a[6];a[6]=b;b=a[5];a[5]=a[7];a[7]=b;return this},getNormalMatrix:function(a){return this.setFromMatrix4(a).getInverse(this).transpose()},transposeIntoArray:function(a){var b=
this.elements;a[0]=b[0];a[1]=b[3];a[2]=b[6];a[3]=b[1];a[4]=b[4];a[5]=b[7];a[6]=b[2];a[7]=b[5];a[8]=b[8];return this},equals:function(a){var b=this.elements;a=a.elements;for(var c=0;9>c;c++)if(b[c]!==a[c])return!1;return!0},fromArray:function(a,b){void 0===b&&(b=0);for(var c=0;9>c;c++)this.elements[c]=a[c+b];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);var c=this.elements;a[b]=c[0];a[b+1]=c[1];a[b+2]=c[2];a[b+3]=c[3];a[b+4]=c[4];a[b+5]=c[5];a[b+6]=c[6];a[b+7]=c[7];a[b+8]=
c[8];return a}});Object.assign(B.prototype,{isMatrix4:!0,set:function(a,b,c,d,e,g,f,h,k,l,n,u,v,q,F,t){var r=this.elements;r[0]=a;r[4]=b;r[8]=c;r[12]=d;r[1]=e;r[5]=g;r[9]=f;r[13]=h;r[2]=k;r[6]=l;r[10]=n;r[14]=u;r[3]=v;r[7]=q;r[11]=F;r[15]=t;return this},identity:function(){this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return this},clone:function(){return(new B).fromArray(this.elements)},copy:function(a){var b=this.elements;a=a.elements;b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=
a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return this},copyPosition:function(a){var b=this.elements;a=a.elements;b[12]=a[12];b[13]=a[13];b[14]=a[14];return this},extractBasis:function(a,b,c){a.setFromMatrixColumn(this,0);b.setFromMatrixColumn(this,1);c.setFromMatrixColumn(this,2);return this},makeBasis:function(a,b,c){this.set(a.x,b.x,c.x,0,a.y,b.y,c.y,0,a.z,b.z,c.z,0,0,0,0,1);return this},extractRotation:function(){var a=new w;return function(b){var c=
this.elements,d=b.elements,e=1/a.setFromMatrixColumn(b,0).length(),g=1/a.setFromMatrixColumn(b,1).length();b=1/a.setFromMatrixColumn(b,2).length();c[0]=d[0]*e;c[1]=d[1]*e;c[2]=d[2]*e;c[4]=d[4]*g;c[5]=d[5]*g;c[6]=d[6]*g;c[8]=d[8]*b;c[9]=d[9]*b;c[10]=d[10]*b;return this}}(),makeRotationFromEuler:function(a){a&&a.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var b=this.elements,c=a.x,d=a.y,e=a.z,g=Math.cos(c),c=Math.sin(c),
f=Math.cos(d),d=Math.sin(d),h=Math.cos(e),e=Math.sin(e);if("XYZ"===a.order){var k=g*h;var l=g*e;var n=c*h;a=c*e;b[0]=f*h;b[4]=-f*e;b[8]=d;b[1]=l+n*d;b[5]=k-a*d;b[9]=-c*f;b[2]=a-k*d;b[6]=n+l*d;b[10]=g*f}else"YXZ"===a.order?(k=f*h,l=f*e,n=d*h,a=d*e,b[0]=k+a*c,b[4]=n*c-l,b[8]=g*d,b[1]=g*e,b[5]=g*h,b[9]=-c,b[2]=l*c-n,b[6]=a+k*c,b[10]=g*f):"ZXY"===a.order?(k=f*h,l=f*e,n=d*h,a=d*e,b[0]=k-a*c,b[4]=-g*e,b[8]=n+l*c,b[1]=l+n*c,b[5]=g*h,b[9]=a-k*c,b[2]=-g*d,b[6]=c,b[10]=g*f):"ZYX"===a.order?(k=g*h,l=g*e,n=c*
h,a=c*e,b[0]=f*h,b[4]=n*d-l,b[8]=k*d+a,b[1]=f*e,b[5]=a*d+k,b[9]=l*d-n,b[2]=-d,b[6]=c*f,b[10]=g*f):"YZX"===a.order?(k=g*f,l=g*d,n=c*f,a=c*d,b[0]=f*h,b[4]=a-k*e,b[8]=n*e+l,b[1]=e,b[5]=g*h,b[9]=-c*h,b[2]=-d*h,b[6]=l*e+n,b[10]=k-a*e):"XZY"===a.order&&(k=g*f,l=g*d,n=c*f,a=c*d,b[0]=f*h,b[4]=-e,b[8]=d*h,b[1]=k*e+a,b[5]=g*h,b[9]=l*e-n,b[2]=n*e-l,b[6]=c*h,b[10]=a*e+k);b[3]=0;b[7]=0;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return this},makeRotationFromQuaternion:function(a){var b=this.elements,c=a._x,d=a._y,
e=a._z,g=a._w,f=c+c,h=d+d,k=e+e;a=c*f;var l=c*h,c=c*k,n=d*h,d=d*k,e=e*k,f=g*f,h=g*h,g=g*k;b[0]=1-(n+e);b[4]=l-g;b[8]=c+h;b[1]=l+g;b[5]=1-(a+e);b[9]=d-f;b[2]=c-h;b[6]=d+f;b[10]=1-(a+n);b[3]=0;b[7]=0;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return this},lookAt:function(){var a=new w,b=new w,c=new w;return function(d,e,g){var f=this.elements;c.subVectors(d,e);0===c.lengthSq()&&(c.z=1);c.normalize();a.crossVectors(g,c);0===a.lengthSq()&&(1===Math.abs(g.z)?c.x+=1E-4:c.z+=1E-4,c.normalize(),a.crossVectors(g,
c));a.normalize();b.crossVectors(c,a);f[0]=a.x;f[4]=b.x;f[8]=c.x;f[1]=a.y;f[5]=b.y;f[9]=c.y;f[2]=a.z;f[6]=b.z;f[10]=c.z;return this}}(),multiply:function(a,b){return void 0!==b?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(a,b)):this.multiplyMatrices(this,a)},premultiply:function(a){return this.multiplyMatrices(a,this)},multiplyMatrices:function(a,b){var c=a.elements,d=b.elements,e=this.elements,g=c[0],f=c[4],
h=c[8],k=c[12],l=c[1],n=c[5],u=c[9],v=c[13],q=c[2],F=c[6],t=c[10],r=c[14],m=c[3],y=c[7],p=c[11],c=c[15],w=d[0],x=d[4],z=d[8],A=d[12],B=d[1],C=d[5],D=d[9],E=d[13],L=d[2],J=d[6],I=d[10],K=d[14],N=d[3],Q=d[7],R=d[11],d=d[15];e[0]=g*w+f*B+h*L+k*N;e[4]=g*x+f*C+h*J+k*Q;e[8]=g*z+f*D+h*I+k*R;e[12]=g*A+f*E+h*K+k*d;e[1]=l*w+n*B+u*L+v*N;e[5]=l*x+n*C+u*J+v*Q;e[9]=l*z+n*D+u*I+v*R;e[13]=l*A+n*E+u*K+v*d;e[2]=q*w+F*B+t*L+r*N;e[6]=q*x+F*C+t*J+r*Q;e[10]=q*z+F*D+t*I+r*R;e[14]=q*A+F*E+t*K+r*d;e[3]=m*w+y*B+p*L+c*N;e[7]=
m*x+y*C+p*J+c*Q;e[11]=m*z+y*D+p*I+c*R;e[15]=m*A+y*E+p*K+c*d;return this},multiplyScalar:function(a){var b=this.elements;b[0]*=a;b[4]*=a;b[8]*=a;b[12]*=a;b[1]*=a;b[5]*=a;b[9]*=a;b[13]*=a;b[2]*=a;b[6]*=a;b[10]*=a;b[14]*=a;b[3]*=a;b[7]*=a;b[11]*=a;b[15]*=a;return this},applyToBufferAttribute:function(){var a=new w;return function(b){for(var c=0,d=b.count;c<d;c++)a.x=b.getX(c),a.y=b.getY(c),a.z=b.getZ(c),a.applyMatrix4(this),b.setXYZ(c,a.x,a.y,a.z);return b}}(),determinant:function(){var a=this.elements,
b=a[0],c=a[4],d=a[8],e=a[12],g=a[1],f=a[5],h=a[9],k=a[13],l=a[2],n=a[6],u=a[10],v=a[14];return a[3]*(+e*h*n-d*k*n-e*f*u+c*k*u+d*f*v-c*h*v)+a[7]*(+b*h*v-b*k*u+e*g*u-d*g*v+d*k*l-e*h*l)+a[11]*(+b*k*n-b*f*v-e*g*n+c*g*v+e*f*l-c*k*l)+a[15]*(-d*f*l-b*h*n+b*f*u+d*g*n-c*g*u+c*h*l)},transpose:function(){var a=this.elements;var b=a[1];a[1]=a[4];a[4]=b;b=a[2];a[2]=a[8];a[8]=b;b=a[6];a[6]=a[9];a[9]=b;b=a[3];a[3]=a[12];a[12]=b;b=a[7];a[7]=a[13];a[13]=b;b=a[11];a[11]=a[14];a[14]=b;return this},setPosition:function(a){var b=
this.elements;b[12]=a.x;b[13]=a.y;b[14]=a.z;return this},getInverse:function(a,b){var c=this.elements,d=a.elements,e=d[0],g=d[1],f=d[2],h=d[3],k=d[4],l=d[5],n=d[6],u=d[7],v=d[8],q=d[9],m=d[10],t=d[11],r=d[12],p=d[13],y=d[14],d=d[15],w=q*y*u-p*m*u+p*n*t-l*y*t-q*n*d+l*m*d,x=r*m*u-v*y*u-r*n*t+k*y*t+v*n*d-k*m*d,z=v*p*u-r*q*u+r*l*t-k*p*t-v*l*d+k*q*d,B=r*q*n-v*p*n-r*l*m+k*p*m+v*l*y-k*q*y,A=e*w+g*x+f*z+h*B;if(0===A){if(!0===b)throw Error("THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0");
console.warn("THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0");return this.identity()}A=1/A;c[0]=w*A;c[1]=(p*m*h-q*y*h-p*f*t+g*y*t+q*f*d-g*m*d)*A;c[2]=(l*y*h-p*n*h+p*f*u-g*y*u-l*f*d+g*n*d)*A;c[3]=(q*n*h-l*m*h-q*f*u+g*m*u+l*f*t-g*n*t)*A;c[4]=x*A;c[5]=(v*y*h-r*m*h+r*f*t-e*y*t-v*f*d+e*m*d)*A;c[6]=(r*n*h-k*y*h-r*f*u+e*y*u+k*f*d-e*n*d)*A;c[7]=(k*m*h-v*n*h+v*f*u-e*m*u-k*f*t+e*n*t)*A;c[8]=z*A;c[9]=(r*q*h-v*p*h-r*g*t+e*p*t+v*g*d-e*q*d)*A;c[10]=(k*p*h-r*l*h+r*g*u-e*p*u-k*g*d+e*l*d)*A;c[11]=
(v*l*h-k*q*h-v*g*u+e*q*u+k*g*t-e*l*t)*A;c[12]=B*A;c[13]=(v*p*f-r*q*f+r*g*m-e*p*m-v*g*y+e*q*y)*A;c[14]=(r*l*f-k*p*f-r*g*n+e*p*n+k*g*y-e*l*y)*A;c[15]=(k*q*f-v*l*f+v*g*n-e*q*n-k*g*m+e*l*m)*A;return this},scale:function(a){var b=this.elements,c=a.x,d=a.y;a=a.z;b[0]*=c;b[4]*=d;b[8]*=a;b[1]*=c;b[5]*=d;b[9]*=a;b[2]*=c;b[6]*=d;b[10]*=a;b[3]*=c;b[7]*=d;b[11]*=a;return this},getMaxScaleOnAxis:function(){var a=this.elements;return Math.sqrt(Math.max(a[0]*a[0]+a[1]*a[1]+a[2]*a[2],a[4]*a[4]+a[5]*a[5]+a[6]*a[6],
a[8]*a[8]+a[9]*a[9]+a[10]*a[10]))},makeTranslation:function(a,b,c){this.set(1,0,0,a,0,1,0,b,0,0,1,c,0,0,0,1);return this},makeRotationX:function(a){var b=Math.cos(a);a=Math.sin(a);this.set(1,0,0,0,0,b,-a,0,0,a,b,0,0,0,0,1);return this},makeRotationY:function(a){var b=Math.cos(a);a=Math.sin(a);this.set(b,0,a,0,0,1,0,0,-a,0,b,0,0,0,0,1);return this},makeRotationZ:function(a){var b=Math.cos(a);a=Math.sin(a);this.set(b,-a,0,0,a,b,0,0,0,0,1,0,0,0,0,1);return this},makeRotationAxis:function(a,b){var c=
Math.cos(b),d=Math.sin(b),e=1-c,g=a.x,f=a.y,h=a.z,k=e*g,l=e*f;this.set(k*g+c,k*f-d*h,k*h+d*f,0,k*f+d*h,l*f+c,l*h-d*g,0,k*h-d*f,l*h+d*g,e*h*h+c,0,0,0,0,1);return this},makeScale:function(a,b,c){this.set(a,0,0,0,0,b,0,0,0,0,c,0,0,0,0,1);return this},makeShear:function(a,b,c){this.set(1,b,c,0,a,1,c,0,a,b,1,0,0,0,0,1);return this},compose:function(a,b,c){this.makeRotationFromQuaternion(b);this.scale(c);this.setPosition(a);return this},decompose:function(){var a=new w,b=new B;return function(c,d,e){var g=
this.elements,f=a.set(g[0],g[1],g[2]).length(),h=a.set(g[4],g[5],g[6]).length(),k=a.set(g[8],g[9],g[10]).length();0>this.determinant()&&(f=-f);c.x=g[12];c.y=g[13];c.z=g[14];b.copy(this);c=1/f;var g=1/h,l=1/k;b.elements[0]*=c;b.elements[1]*=c;b.elements[2]*=c;b.elements[4]*=g;b.elements[5]*=g;b.elements[6]*=g;b.elements[8]*=l;b.elements[9]*=l;b.elements[10]*=l;d.setFromRotationMatrix(b);e.x=f;e.y=h;e.z=k;return this}}(),makePerspective:function(a,b,c,d,e,g){void 0===g&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");
var f=this.elements;f[0]=2*e/(b-a);f[4]=0;f[8]=(b+a)/(b-a);f[12]=0;f[1]=0;f[5]=2*e/(c-d);f[9]=(c+d)/(c-d);f[13]=0;f[2]=0;f[6]=0;f[10]=-(g+e)/(g-e);f[14]=-2*g*e/(g-e);f[3]=0;f[7]=0;f[11]=-1;f[15]=0;return this},makeOrthographic:function(a,b,c,d,e,g){var f=this.elements,h=1/(b-a),k=1/(c-d),l=1/(g-e);f[0]=2*h;f[4]=0;f[8]=0;f[12]=-((b+a)*h);f[1]=0;f[5]=2*k;f[9]=0;f[13]=-((c+d)*k);f[2]=0;f[6]=0;f[10]=-2*l;f[14]=-((g+e)*l);f[3]=0;f[7]=0;f[11]=0;f[15]=1;return this},equals:function(a){var b=this.elements;
a=a.elements;for(var c=0;16>c;c++)if(b[c]!==a[c])return!1;return!0},fromArray:function(a,b){void 0===b&&(b=0);for(var c=0;16>c;c++)this.elements[c]=a[c+b];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);var c=this.elements;a[b]=c[0];a[b+1]=c[1];a[b+2]=c[2];a[b+3]=c[3];a[b+4]=c[4];a[b+5]=c[5];a[b+6]=c[6];a[b+7]=c[7];a[b+8]=c[8];a[b+9]=c[9];a[b+10]=c[10];a[b+11]=c[11];a[b+12]=c[12];a[b+13]=c[13];a[b+14]=c[14];a[b+15]=c[15];return a}});Object.assign(x,{slerp:function(a,b,c,d){return c.copy(a).slerp(b,
d)},slerpFlat:function(a,b,c,d,e,g,f){var h=c[d+0],k=c[d+1],l=c[d+2];c=c[d+3];d=e[g+0];var n=e[g+1],u=e[g+2];e=e[g+3];if(c!==e||h!==d||k!==n||l!==u){g=1-f;var m=h*d+k*n+l*u+c*e,q=0<=m?1:-1,p=1-m*m;p>Number.EPSILON&&(p=Math.sqrt(p),m=Math.atan2(p,m*q),g=Math.sin(g*m)/p,f=Math.sin(f*m)/p);q*=f;h=h*g+d*q;k=k*g+n*q;l=l*g+u*q;c=c*g+e*q;g===1-f&&(f=1/Math.sqrt(h*h+k*k+l*l+c*c),h*=f,k*=f,l*=f,c*=f)}a[b]=h;a[b+1]=k;a[b+2]=l;a[b+3]=c}});Object.defineProperties(x.prototype,{x:{get:function(){return this._x},
set:function(a){this._x=a;this.onChangeCallback()}},y:{get:function(){return this._y},set:function(a){this._y=a;this.onChangeCallback()}},z:{get:function(){return this._z},set:function(a){this._z=a;this.onChangeCallback()}},w:{get:function(){return this._w},set:function(a){this._w=a;this.onChangeCallback()}}});Object.assign(x.prototype,{set:function(a,b,c,d){this._x=a;this._y=b;this._z=c;this._w=d;this.onChangeCallback();return this},clone:function(){return new this.constructor(this._x,this._y,this._z,
this._w)},copy:function(a){this._x=a.x;this._y=a.y;this._z=a.z;this._w=a.w;this.onChangeCallback();return this},setFromEuler:function(a,b){if(!a||!a.isEuler)throw Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var c=a._x,d=a._y,e=a._z,g=a.order,f=Math.cos,h=Math.sin,k=f(c/2),l=f(d/2),f=f(e/2),c=h(c/2),d=h(d/2),e=h(e/2);"XYZ"===g?(this._x=c*l*f+k*d*e,this._y=k*d*f-c*l*e,this._z=k*l*e+c*d*f,this._w=k*l*f-c*d*e):"YXZ"===g?(this._x=c*l*f+k*d*
e,this._y=k*d*f-c*l*e,this._z=k*l*e-c*d*f,this._w=k*l*f+c*d*e):"ZXY"===g?(this._x=c*l*f-k*d*e,this._y=k*d*f+c*l*e,this._z=k*l*e+c*d*f,this._w=k*l*f-c*d*e):"ZYX"===g?(this._x=c*l*f-k*d*e,this._y=k*d*f+c*l*e,this._z=k*l*e-c*d*f,this._w=k*l*f+c*d*e):"YZX"===g?(this._x=c*l*f+k*d*e,this._y=k*d*f+c*l*e,this._z=k*l*e-c*d*f,this._w=k*l*f-c*d*e):"XZY"===g&&(this._x=c*l*f-k*d*e,this._y=k*d*f-c*l*e,this._z=k*l*e+c*d*f,this._w=k*l*f+c*d*e);if(!1!==b)this.onChangeCallback();return this},setFromAxisAngle:function(a,
b){var c=b/2,d=Math.sin(c);this._x=a.x*d;this._y=a.y*d;this._z=a.z*d;this._w=Math.cos(c);this.onChangeCallback();return this},setFromRotationMatrix:function(a){var b=a.elements,c=b[0];a=b[4];var d=b[8],e=b[1],g=b[5],f=b[9],h=b[2],k=b[6],b=b[10],l=c+g+b;0<l?(c=.5/Math.sqrt(l+1),this._w=.25/c,this._x=(k-f)*c,this._y=(d-h)*c,this._z=(e-a)*c):c>g&&c>b?(c=2*Math.sqrt(1+c-g-b),this._w=(k-f)/c,this._x=.25*c,this._y=(a+e)/c,this._z=(d+h)/c):g>b?(c=2*Math.sqrt(1+g-c-b),this._w=(d-h)/c,this._x=(a+e)/c,this._y=
.25*c,this._z=(f+k)/c):(c=2*Math.sqrt(1+b-c-g),this._w=(e-a)/c,this._x=(d+h)/c,this._y=(f+k)/c,this._z=.25*c);this.onChangeCallback();return this},setFromUnitVectors:function(){var a=new w,b;return function(c,d){void 0===a&&(a=new w);b=c.dot(d)+1;1E-6>b?(b=0,Math.abs(c.x)>Math.abs(c.z)?a.set(-c.y,c.x,0):a.set(0,-c.z,c.y)):a.crossVectors(c,d);this._x=a.x;this._y=a.y;this._z=a.z;this._w=b;return this.normalize()}}(),inverse:function(){return this.conjugate().normalize()},conjugate:function(){this._x*=
-1;this._y*=-1;this._z*=-1;this.onChangeCallback();return this},dot:function(a){return this._x*a._x+this._y*a._y+this._z*a._z+this._w*a._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var a=this.length();0===a?(this._z=this._y=this._x=0,this._w=1):(a=1/a,this._x*=a,this._y*=a,this._z*=a,this._w*=a);this.onChangeCallback();return this},
multiply:function(a,b){return void 0!==b?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(a,b)):this.multiplyQuaternions(this,a)},premultiply:function(a){return this.multiplyQuaternions(a,this)},multiplyQuaternions:function(a,b){var c=a._x,d=a._y,e=a._z,g=a._w,f=b._x,h=b._y,k=b._z,l=b._w;this._x=c*l+g*f+d*k-e*h;this._y=d*l+g*h+e*f-c*k;this._z=e*l+g*k+c*h-d*f;this._w=g*l-c*f-d*h-e*k;this.onChangeCallback();
return this},slerp:function(a,b){if(0===b)return this;if(1===b)return this.copy(a);var c=this._x,d=this._y,e=this._z,g=this._w,f=g*a._w+c*a._x+d*a._y+e*a._z;0>f?(this._w=-a._w,this._x=-a._x,this._y=-a._y,this._z=-a._z,f=-f):this.copy(a);if(1<=f)return this._w=g,this._x=c,this._y=d,this._z=e,this;var h=Math.sqrt(1-f*f);if(.001>Math.abs(h))return this._w=.5*(g+this._w),this._x=.5*(c+this._x),this._y=.5*(d+this._y),this._z=.5*(e+this._z),this;var k=Math.atan2(h,f),f=Math.sin((1-b)*k)/h,h=Math.sin(b*
k)/h;this._w=g*f+this._w*h;this._x=c*f+this._x*h;this._y=d*f+this._y*h;this._z=e*f+this._z*h;this.onChangeCallback();return this},equals:function(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._w===this._w},fromArray:function(a,b){void 0===b&&(b=0);this._x=a[b];this._y=a[b+1];this._z=a[b+2];this._w=a[b+3];this.onChangeCallback();return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this._x;a[b+1]=this._y;a[b+2]=this._z;a[b+3]=this._w;return a},onChange:function(a){this.onChangeCallback=
a;return this},onChangeCallback:function(){}});Object.defineProperties(p.prototype,{x:{get:function(){return this._x},set:function(a){this._x=a;this.onChangeCallback()}},y:{get:function(){return this._y},set:function(a){this._y=a;this.onChangeCallback()}},z:{get:function(){return this._z},set:function(a){this._z=a;this.onChangeCallback()}},order:{get:function(){return this._order},set:function(a){this._order=a;this.onChangeCallback()}}});Object.assign(p.prototype,{isEuler:!0,set:function(a,b,c,d){this._x=
a;this._y=b;this._z=c;this._order=d||this._order;this.onChangeCallback();return this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(a){this._x=a._x;this._y=a._y;this._z=a._z;this._order=a._order;this.onChangeCallback();return this},setFromRotationMatrix:function(a,b,c){var d=M.clamp,e=a.elements;a=e[0];var g=e[4],f=e[8],h=e[1],k=e[5],l=e[9],n=e[2],m=e[6],e=e[10];b=b||this._order;"XYZ"===b?(this._y=Math.asin(d(f,-1,1)),.99999>Math.abs(f)?(this._x=
Math.atan2(-l,e),this._z=Math.atan2(-g,a)):(this._x=Math.atan2(m,k),this._z=0)):"YXZ"===b?(this._x=Math.asin(-d(l,-1,1)),.99999>Math.abs(l)?(this._y=Math.atan2(f,e),this._z=Math.atan2(h,k)):(this._y=Math.atan2(-n,a),this._z=0)):"ZXY"===b?(this._x=Math.asin(d(m,-1,1)),.99999>Math.abs(m)?(this._y=Math.atan2(-n,e),this._z=Math.atan2(-g,k)):(this._y=0,this._z=Math.atan2(h,a))):"ZYX"===b?(this._y=Math.asin(-d(n,-1,1)),.99999>Math.abs(n)?(this._x=Math.atan2(m,e),this._z=Math.atan2(h,a)):(this._x=0,this._z=
Math.atan2(-g,k))):"YZX"===b?(this._z=Math.asin(d(h,-1,1)),.99999>Math.abs(h)?(this._x=Math.atan2(-l,k),this._y=Math.atan2(-n,a)):(this._x=0,this._y=Math.atan2(f,e))):"XZY"===b?(this._z=Math.asin(-d(g,-1,1)),.99999>Math.abs(g)?(this._x=Math.atan2(m,k),this._y=Math.atan2(f,a)):(this._x=Math.atan2(-l,e),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+b);this._order=b;if(!1!==c)this.onChangeCallback();return this},setFromQuaternion:function(){var a=new B;return function(b,
c,d){a.makeRotationFromQuaternion(b);return this.setFromRotationMatrix(a,c,d)}}(),setFromVector3:function(a,b){return this.set(a.x,a.y,a.z,b||this._order)},reorder:function(){var a=new x;return function(b){a.setFromEuler(this);return this.setFromQuaternion(a,b)}}(),equals:function(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._order===this._order},fromArray:function(a){this._x=a[0];this._y=a[1];this._z=a[2];void 0!==a[3]&&(this._order=a[3]);this.onChangeCallback();return this},toArray:function(a,
b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this._x;a[b+1]=this._y;a[b+2]=this._z;a[b+3]=this._order;return a},toVector3:function(a){return a?a.set(this._x,this._y,this._z):new w(this._x,this._y,this._z)},onChange:function(a){this.onChangeCallback=a;return this},onChangeCallback:function(){}});C={Euler:p,Vector3:w,Matrix3:C,Matrix4:B,Quaternion:x}}var E=1*Math.PI,D=2*Math.PI,z=this.AstroJS={AU2M:149597870700,AU2KM:1.495978707E8,PC2M:30856776E9,PC2AU:206265,PC2LY:3.26156,KM2M:1E3,JY2JD:365.25,JD2SEC:86400,
MSOL2KG:1.98855E30,DEG2RAD:D/360},G;for(G in z)m=G.split("2",2).reverse().join("2"),z[m]=1/z[G];z.exportConstants=function(a){for(var b in z)a[b]=z[b]};z.DMS2RAD=function(a,b,c){return(0>a?-1:1)*(Math.abs(a)+(b/60+c/60/60))*DEG2RAD};z.HMS2RAD=function(a,b,c){return 15*DMS2RAD(a,b,c)};z.PI=E;z.TAU=D;z.JD2000=2451545;var S=z.GMJD={sun:2.959122083684144E-4,mer:4.912547451450812E-11,ven:7.243452486162703E-10,ear:8.997011603631609E-10,emb:8.997011603631609E-10,mar:9.549535105779258E-11,jup:2.825345842083778E-7,
sat:8.459715185680659E-8,ura:1.2920249167819694E-8,nep:1.5243589007842763E-8,plu:2.1886997654259697E-12};m=z.GMJY={};for(G in S)m[G]=S[G],m[G]*=133407.5625;z.CYCLE=function(a){a%=D;0>a&&(a+=D);return a};z.TURN=function(a){a%=D;a>E&&(a-=D);return a};z.JD2J2K=function(a){return(a-2451545)/365.25};z.J2K2JD=function(a){return 365.25*a+2451545};z.exportConstants(this);Math.cbrt=Math.cbrt||function(a){var b=Math.pow(Math.abs(a),1/3);return 0>a?-b:b};Math.fmod=Math.fmod||function(a,b){return a%b};"undefined"!=
typeof C&&(this.Vector3=C.Vector3);"use strict";(function(a){function b(a){if(a.empty)return this;this._G=a.G||b.GMP.sun;this._t=a.epoch||a.t||0;this.translate=a.translate||null;"x"in a&&"y"in a&&"z"in a?this._r=new Vector3(a.x,a.y,a.z):"rx"in a&&"ry"in a&&"rz"in a&&(this._r=new Vector3(a.rx,a.ry,a.rz));"X"in a&&"Y"in a&&"Z"in a?this._v=new Vector3(a.X,a.Y,a.Z):"vx"in a&&"vy"in a&&"vz"in a&&(this._v=new Vector3(a.vx,a.vy,a.vz));if("r"in a&&"v"in a){var c=a.r,d=a.v;this._r=new Vector3(c.x,c.y,c.z);
this._v=new Vector3(d.x,d.y,d.z)}this.vectors=!(!this._r||!this._v);var c="aeiMnPLcCwWOkhqpG".split(""),f;for(f in c)a.hasOwnProperty(c[f])&&(this["_"+c[f]]=a[c[f]]);"name"in a&&(this.name=a.name);this.lazy||(this.updateElements(),this.requireElements())}b.GMP=S;var c=b.prototype;c.clone=function(a){var c=new b({empty:!0});a&&(delete this._v,delete this._r);for(var d in this)this.hasOwnProperty(d)&&(c[d]=this[d]&&"function"==typeof this[d].clone?this[d].clone():this[d]);a&&c.update(a);return c};c.checkElements=
function(a){if(!this.elements)throw"Orbitals not calculated";if(!("_i"in this))throw"Orbit is missing inclination (i)";if(!("_e"in this))throw"Orbit is missing eccentricity (e)";if(!("_a"in this))throw"Orbit is missing semi-major axis (a)";if(!("_b"in this))throw"Orbit is missing semi-minor axis (b)";if(!("_l"in this))throw"Orbit is missing semi-latus rectum (l)";if(!("_c"in this))throw"Orbit is missing periapsis (c)";if(!("_C"in this))throw"Orbit is missing apoapsis (C)";if(!("_L"in this))throw"Orbit is missing mean longitude (L)";
if(!("_O"in this))throw"Orbit is missing right ascending node (O)";if(!("_T"in this))throw"Orbit is missing time of periapsis (w)";if(!("_w"in this))throw"Orbit is missing argument of periapsis (w)";if(!("_W"in this))throw"Orbit is missing longitude of the periapsis (W)";if(!("_n"in this))throw"Orbit is missing mean motion (n)";if(!("_M"in this))throw"Orbit is missing mean anomaly (M)";if(!("_P"in this))throw"Orbit is missing orbital period (P)";if(!("_A"in this))throw"Orbit is missing angular momentum (A)";
if(!("_c"in this))throw"Orbit is missing pericenter (c)";if(!("_C"in this))throw"Orbit is missing apocenter (C)";if(0>this._e)throw"Negative eccentricity is invalid";if(1<this._e)throw"Eccentricity must not be hyperbolic (> 1)";if(1==this._e)throw"Eccentricity must not be parabolic (== 1)";if(a&&!("_m"in this))throw"Orbit is missing true anomaly (m)";if(a&&!("_B"in this))throw"Orbit is missing radial velocity (B)";if(a&&!("_E"in this))throw"Orbit is missing eccentric anomaly (E)";};c.requireElements=
function(a){this.updateElements(a);this.checkElements(a);return this};c.updateElements=function(a){if(this.elements)return this;this.elements=!0;if("_r"in this&&"_v"in this){var b=this._r,c=this._v,d=this._G,h=b.length();this._A3=b.clone().cross(c);this._A2=this._A3.lengthSq();this._A=Math.sqrt(this._A2);this._B=b.dot(c)/h;var k=this._e3=b.clone().multiplyScalar(c.lengthSq()-d/h).sub(c.clone().multiplyScalar(h*this._B)).multiplyScalar(1/d),c=k.lengthSq(),c=this._e=Math.sqrt(c);this._i=Math.acos(this._A3.z/
this._A);this._l=this._A2/d;this._c=this._l/(1+c);this._C=this._l/(1-c);this._a=(this._C+this._c)/2;var d=-this._A3.y,l=+this._A3.x,n=Math.sqrt(d*d+l*l),m=0==n?0:Math.acos(d/n);this._O=0>l?D-m:m;m=d*k.x+l*k.y;this._w=0===n||0===c?0:Math.acos(m/n/c);0>k.z&&(this._w*=-1);b=0===c&&0===n?Math.acos(b.x/h):0===c?Math.acos((d*b.x+l*b.y)/(n*h)):Math.acos((k.x*b.x+k.y*b.y+k.z*b.z)/c/h);b=this._m=0>this._B?D-b:b;b=this._E=CYCLE(Math.atan2(Math.sqrt(1-c*c)*Math.sin(b),c+Math.cos(b)));this._M=b-c*Math.sin(b)}"_k"in
this&&"_h"in this&&(this._W=Math.atan2(this._h,this._k),this._e=this._h/Math.sin(this._W));"_q"in this&&"_p"in this&&(this._O=Math.atan2(this._p,this._q),this._i=2*Math.asin((this._p-this._q)/(-Math.sqrt(2)*Math.sin(E/4-this._O))));"_n"in this&&!("_a"in this)&&(this._a=Math.cbrt(this._G/this._n/this._n));"_P"in this&&!("_a"in this)&&(c=this._P/D,this._a=Math.cbrt(this._G*c*c));"_a"in this||("_c"in this&&"_C"in this?this._a=(this._C+this._c)/2:"_e"in this&&"_C"in this?this._a=this._C/(1+this._e):"_c"in
this&&"_e"in this&&(this._a=this._c/(1-this._e)));"_e"in this||("_c"in this&&"_C"in this?this._e=1-this._c/this._a:"_a"in this&&"_C"in this?this._e=this._C/this._a-1:"_c"in this&&"_a"in this&&(this._e=1-this._c/this._a));"_e"in this?(c=1-this._e*this._e,"_a"in this?(this._l=this._a*c,this._b=Math.sqrt(this._a*this._l)):"_b"in this?(this._a=this._b/Math.sqrt(c),this._l=this._a*c):"_l"in this&&(this._a=this._l/c,this._b=Math.sqrt(this._a*this._l))):"_a"in this?"_b"in this?(this._l=this._b*this._b/this._a,
this._e=Math.sqrt(1-this._l/this._a)):"_l"in this&&(this._e=Math.sqrt(1-this._l/this._a),this._b=Math.sqrt(this._a*this._l)):"_b"in this&&"_l"in this&&(this.a=this._b*this._b/this._l,this._e=Math.sqrt(1-this._l/this._a));"_a"in this&&!("_P"in this)&&(this._P=D/Math.sqrt(this._G)*Math.pow(this._a,1.5));"_P"in this&&!("_n"in this)&&(this._n=D/this._P);"_P"in this&&!("_A"in this)&&"_a"in this&&"_b"in this&&(this._A=D*this._a*this._b/this._P);"_a"in this&&"_e"in this&&("_c"in this||(this._c=this._a*(1-
this._e)),"_C"in this||(this._C=this._a*(1+this._e)));if("_L"in this)if("_M"in this)this._W=this._L-this._M,"_O"in this?this._w=this._W-this._O:"_w"in this&&(this._O=this._W-this._w);else if("_W"in this)this._M=this._L-this._W,"_O"in this?this._w=this._W-this._O:"_w"in this&&(this._O=this._W-this._w);else if("_O"in this&&"_w"in this)this._W=this._O+this._w,this._M=this._L-this._W;else throw"Orbit incomplete";else if("_O"in this)if("_w"in this)this._W=this._O+this._w,"_M"in this&&(this._L=this._M+
this._W);else if("_W"in this)this._w=this._W-this._O,"_M"in this&&(this._L=this._M+this._W);else throw"Orbit incomplete";else"_M"in this&&"_w"in this&&"_W"in this&&(this._L=this._W+this._M,this._O=this._W-this._w);a&&this.m();"_W"in this&&(this._W=TURN(this._W));"_L"in this&&(this._L=CYCLE(this._L));"_M"in this&&(this._M=CYCLE(this._M));"_O"in this&&(this._O=CYCLE(this._O));"_w"in this&&(this._w=TURN(this._w));"_M"in this&&(this._T=-this._M/this._n);return this};c.E=function(a){if("_E"in this&&!a)return this._E;
var b=this._e,c=this._m,d=this._M;if(!a&&null!=b&&null!=c)return this._E=CYCLE(Math.atan2(Math.sqrt(1-b*b)*Math.sin(c),b+Math.cos(c)));if(null!=b&&null!=d){a&&(d=CYCLE(this._n*(a-this._T-this._t)));var c=.8>b?d:E;var h=1;for(var k=0;1E-12<Math.abs(h)&&12>k;++k){h=d-c+b*Math.sin(c);var l=b*Math.cos(c)-1;h/=l;c-=h}c=CYCLE(c);a||(this._E=c);return c}throw"Invalid orbital state";};c.m=function(a){if(0===arguments.length){if("_m"in this)return this._m;var b=this.E()/2;return this._m=CYCLE(2*Math.atan2(Math.sqrt(1+
this._e)*Math.sin(b),Math.sqrt(1-this._e)*Math.cos(b)))}return CYCLE(2*Math.atan2(Math.sqrt(1+this._e)*Math.sin(a/2),Math.sqrt(1-this._e)*Math.cos(a/2)))};c.B=function(){if("_B"in this)return this._B;var a=this.r(),b=this.v();return this._B=a.dot(b)/a.length()};c.e3=function(){if("_e3"in this)return this._e3;var a=this.r(),b=this.v();if(null!==a&&null!==b)return this._e3=a.clone().multiplyScalar(b.lengthSq()-this._G/a.length()).sub(b.clone().multiplyScalar(a.length()*this.B())).multiplyScalar(1/this._G)};
c.i=function(){return this._i};c.e=function(){return this._e};c.a=function(){return this._a};c.b=function(){return this._b};c.l=function(){return this._l};c.C=function(){return this._C};c.c=function(){return this._c};c.L=function(){return this._L};c.O=function(){return this._O};c.w=function(){return this._w};c.T=function(){return this._T};c.W=function(){return this._W};c.n=function(){return this._n};c.A=function(){return this._A};c.M=function(){return this._M};c.P=function(){return this._P};c.q=function(){return"_q"in
this?this._q:this._q=Math.cos(this._O)*Math.sin(this._i/2)};c.p=function(){return"_p"in this?this._p:this._p=Math.sin(this._O)*Math.sin(this._i/2)};c.k=function(){return"_k"in this?this._k:this._k=this._e*Math.cos(this._W)};c.h=function(){return"_h"in this?this._h:this._h=this._e*Math.sin(this._W)};c.update=function(a){this.elements||this.resolveElements(!0);this._M=CYCLE(this._n*(a-this._T));this._L=CYCLE(this._M+this._W);delete this._E;delete this._m;delete this._r;delete this._v;return this};c.state=
function(a){this.elements||this.resolveElements(!0);a=a||0;if(!a&&"_r"in this&&"_v"in this)return{r:this._r,v:this._v,time:a,orbit:this};var b=this._e,c=this._a,d=this._i,h=this._O,k=this._w,l=this.E(a),n=this.m(l),m=c*(1-b*Math.cos(l)),p=Math.sqrt(this._G*c)/m,c=m*Math.cos(n),m=m*Math.sin(n),n=p*-Math.sin(l),b=p*Math.sqrt(1-b*b)*Math.cos(l),p=Math.sin(h),q=Math.cos(h),h=Math.sin(d),w=Math.cos(d),t=Math.sin(k),r=Math.cos(k),k=r*q-t*p*w,d=r*p+t*q*w,l=r*p*w+t*q,p=r*q*w-t*p,q=t*h,h=r*h,m=new Vector3(c*
k-m*l,c*d+m*p,c*q+m*h),c=new Vector3(n*k-b*l,n*d+b*p,n*q+b*h);a||(this._r=m,this._v=c);return{r:m,v:c,time:a,orbit:this}};c.r=function(a){return this.state(a).r};c.v=function(a){return this.state(a).v};c.inclination=c.i;c.eccentricity=c.e;c.semiMajorAxis=c.a;c.semiMinorAxis=c.b;c.semilatusRectum=c.l;c.meanLongitude=c.L;c.ascendingNode=c.O;c.argOfPericenter=c.w;c.timeOfPericenter=c.T;c.longitudeOfPericenter=c.W;c.meanMotion=c.n;c.meanAnomaly=c.M;c.orbitalPeriod=c.P;c.angularMomentum=c.A;c.trueAnomaly=
c.m;c.radialVelocity=c.B;c.eccentricAnomaly=c.E;c.apoapsis=c.C;c.aphelion=c.C;c.apocenter=c.C;c.periapsis=c.c;c.perhelion=c.c;c.pericenter=c.c;c.position=c.r;c.velocity=c.v;a.Orbit=a.Orbital=b})(this);"use strict";(function(a){function b(a){a=d(a);for(var b=JD2J2K(a)/100,c=b*b,e=c*b,g=k+l*b+m*c+p*e,n=v+q*b+w*c+t*e,L=r+x*b+y*c+z*e,N=B+C*b+D*c+A*e,u=E+G*b+O*c+P*e,I=a=0,J,K,F,H=0;H<h.length;H++)J=h[H][0]+h[H][1]*b,K=h[H][2]+h[H][3]*b,F=f[H][0]*g+f[H][1]*n+f[H][2]*L+f[H][3]*N+f[H][4]*u,a+=J*Math.sin(F),
I+=K*Math.cos(F);b=(23+26/60+21.448/3600-46.815/3600*b-5.9E-4/3600*c+.001813/3600*e)*DEG2RAD;a/=36E6/DEG2RAD;I/=36E6/DEG2RAD;return{longitude:TURN(a),obliquity:TURN(I),ecliptic:CYCLE(b)}}function c(a){if(2067314.5>a)return a=(a-2067314.5)/36525,1830-405*a+46.5*a*a;if(2067314.5<=a&&2305447.5>a)return a=(a-2396758.5)/36525,22.5*a*a;if(2312752.5<=a&&2448622.5>a){var b=Math.floor((a-2312752.5)/730.5);b>g.length-2&&(b=g.length-2);var c=g[b+1]-g[b],d=g[b+2]-g[b+1];a=(a-(2312752.5+730.5*b))/730.5;return g[b+
1]+a/2*(c+d+a*(c-d))}if(2448622.5<=a&&2455197.5>=a)return b=[56.86,63.83,70],c=b[1]-b[0],d=b[2]-b[1],a=(a-2451544.5)/3652.5,b[1]+a/2*(c+d+a*(d-c));a-=2382148;return-15+a*a/41048480}function d(a){return a+c(a)/JD2SEC}function e(a){var b=JD2J2K(a)/100;return CYCLE(L+J*(a-2451545)+I*b*b+K*b*b*b)}var g=[124,115,106,98,91,85,79,74,70,65,62,58,55,53,50,48,46,44,42,40,37,35,33,31,28,26,24,22,20,18,16,14,13,12,11,10,9,9,9,9,9,9,9,9,10,10,10,10,10,11,11,11,11,11,11,11,12,12,12,12,12,12,13,13,13,13,14,14,14,
15,15,15,15,16,16,16,16,16,17,17,17,17,17,17,17,17,16,16,15,14,13.7,13.1,12.7,12.5,12.5,12.5,12.5,12.5,12.5,12.3,12,11.4,10.6,9.6,8.6,7.5,6.6,6,5.7,5.6,5.7,5.9,6.2,6.5,6.8,7.1,7.3,7.5,7.7,7.8,7.9,7.5,6.4,5.4,2.9,1.6,-1,-2.7,-3.6,-4.7,-5.4,-5.2,-5.5,-5.6,-5.8,-5.9,-6.2,-6.4,-6.1,-4.7,-2.7,0,2.6,5.4,7.7,10.5,13.4,16,18.2,20.2,21.2,22.4,23.5,23.9,24.3,24,23.9,23.9,23.7,24,24.3,25.3,26.2,27.3,28.2,29.1,30,30.7,31.4,32.2,33.1,34,35,36.5,38.3,40.2,42.2,44.5,46.5,48.5,50.5,52.2,53.8,54.9,55.8,56.9,58.3],
f=[[0,0,0,0,1],[-2,0,0,2,2],[0,0,0,2,2],[0,0,0,0,2],[0,1,0,0,0],[0,0,1,0,0],[-2,1,0,2,2],[0,0,0,2,1],[0,0,1,2,2],[-2,-1,0,2,2],[-2,0,1,0,0],[-2,0,0,2,1],[0,0,-1,2,2],[2,0,0,0,0],[0,0,1,0,1],[2,0,-1,2,2],[0,0,-1,0,1],[0,0,1,2,1],[-2,0,2,0,0],[0,0,-2,2,1],[2,0,0,2,2],[0,0,2,2,2],[0,0,2,0,0],[-2,0,1,2,2],[0,0,0,2,0],[-2,0,0,2,0],[0,0,-1,2,1],[0,2,0,0,0],[2,0,-1,0,1],[-2,2,0,2,2],[0,1,0,0,1],[-2,0,1,0,1],[0,-1,0,0,1],[0,0,2,-2,0],[2,0,-1,2,1],[2,0,1,2,2],[0,1,0,2,2],[-2,1,1,0,0],[0,-1,0,2,2],[2,0,0,2,
1],[2,0,1,0,0],[-2,0,2,2,2],[-2,0,1,2,1],[2,0,-2,0,1],[2,0,0,0,1],[0,-1,1,0,0],[-2,-1,0,2,1],[-2,0,0,0,1],[0,0,2,2,1],[-2,0,2,0,1],[-2,1,0,2,1],[0,0,1,-2,0],[-1,0,1,0,0],[-2,1,0,0,0],[1,0,0,0,0],[0,0,1,2,0],[0,0,-2,2,2],[-1,-1,1,0,0],[0,1,1,0,0],[0,-1,1,2,2],[2,-1,-1,2,2],[0,0,3,2,2],[2,-1,0,2,2]],h=[[-171996,-174.2,92025,8.9],[-13187,-1.6,5736,-3.1],[-2274,-.2,977,-.5],[2062,.2,-895,.5],[1426,-3.4,54,-.1],[712,.1,-7,0],[-517,1.2,224,-.6],[-386,-.4,200,0],[-301,0,129,-.1],[217,-.5,-95,.3],[-158,0,
0,0],[129,.1,-70,0],[123,0,-53,0],[63,0,0,0],[63,.1,-33,0],[-59,0,26,0],[-58,-.1,32,0],[-51,0,27,0],[48,0,0,0],[46,0,-24,0],[-38,0,16,0],[-31,0,13,0],[29,0,0,0],[29,0,-12,0],[26,0,0,0],[-22,0,0,0],[21,0,-10,0],[17,-.1,0,0],[16,0,-8,0],[-16,.1,7,0],[-15,0,9,0],[-13,0,7,0],[-12,0,6,0],[11,0,0,0],[-10,0,5,0],[-8,0,3,0],[7,0,-3,0],[-7,0,0,0],[-7,0,3,0],[-7,0,3,0],[6,0,0,0],[6,0,-3,0],[6,0,-3,0],[-6,0,3,0],[-6,0,3,0],[5,0,0,0],[-5,0,3,0],[-5,0,3,0],[-5,0,3,0],[4,0,0,0],[4,0,0,0],[4,0,0,0],[-4,0,0,0],[-4,
0,0,0],[-4,0,0,0],[3,0,0,0],[-3,0,0,0],[-3,0,0,0],[-3,0,0,0],[-3,0,0,0],[-3,0,0,0],[-3,0,0,0],[-3,0,0,0]],k=297.85036*DEG2RAD,l=445267.11148*DEG2RAD,m=-.0019142*DEG2RAD,p=DEG2RAD/189474,v=357.52772*DEG2RAD,q=35999.05034*DEG2RAD,w=-.0086972*DEG2RAD,t=-DEG2RAD/3E5,r=134.96298*DEG2RAD,x=477198.867398*DEG2RAD,y=.0086972*DEG2RAD,z=DEG2RAD/56250,B=93.27191*DEG2RAD,C=483202.017538*DEG2RAD,D=-.0036825*DEG2RAD,A=DEG2RAD/327270,E=125.04452*DEG2RAD,G=-1934.136261*DEG2RAD,O=.0020708*DEG2RAD,P=DEG2RAD/45E4,L=
280.46061837*DEG2RAD,J=360.98564736629*DEG2RAD,I=3.87933E-4*DEG2RAD,K=-DEG2RAD/3871E4;a.JD2JDE=d;a.JDE2JD=function(a){return a-c(a)/JD2SEC};a.getMeanSiderealTime=e;a.getApparentSiderealTime=function(a){var c=b(a);return e(a)+c.longitude/1*Math.cos(c.obliquity)};a.getNutation=b})(this);"use strict";(function(a){function b(){return{p:this.p,l:this.l,z:this.z}}function c(){return{x:this.x,y:this.y,z:this.z}}function d(){return{l:this.l,b:this.b,i:this.i,r:this.r}}function e(){this.r=Math.sqrt(this.x*
this.x+this.y*this.y+this.z*this.z);this.i=Math.acos(this.z/this.r);this.b=E/2-this.i;this.l=Math.atan2(this.y,this.x);return(this.sph=d).call(this)}function g(){var a=this.r*Math.sin(this.i);this.x=a*Math.cos(this.l);this.y=a*Math.sin(this.l);this.z=this.r*Math.cos(this.i);return(this.cart=c).call(this)}function f(){this.p=Math.sqrt(this.x*this.x+this.y*this.y);this.l=Math.atan2(this.y,this.x);return(this.cyl=b).call(this)}function h(){this.x=this.p*Math.cos(this.l);this.y=this.p*Math.sin(this.l);
return(this.cart=c).call(this)}function k(){this.i=Math.atan2(this.p,this.z);this.b=E/2-this.i;this.r=Math.sqrt(this.p*this.p+this.z*this.z);return(this.sph=d).call(this)}function l(){this.p=this.r*Math.cos(this.b);this.z=this.r*Math.sin(this.b);return(this.cyl=b).call(this)}function m(a){"ra"in a&&(a.l=a.ra);"dec"in a&&(a.b=a.dec);"dist"in a&&(a.r=a.dist);"x"in a&&"y"in a&&"z"in a?(this.x=a.x,this.y=a.y,this.z=a.z,this.cart=c,this.sph=e,this.cyl=f):"p"in a&&"l"in a&&"z"in a?(this.p=a.p,this.l=a.l,
this.z=a.z,this.cart=h,this.sph=k,this.cyl=b):"l"in a&&(this.l=a.l,this.r=a.r||1,"i"in a||"b"in a)&&(this.cart=g,this.sph=d,this.cyl=l,"b"in a?(this.b=a.b,this.i=E/2-this.b):"i"in a&&(this.i=a.i,this.b=E/2-this.i))}m.prototype.ecl2equ=function(a){var b=this.cart(),c=Math.sin(a);a=Math.cos(a);return new m({x:b.x,y:b.y*a-b.z*c,z:b.z*a+b.y*c})};m.prototype.equ2ecl=function(a){var b=this.cart(),c=Math.sin(a);a=Math.cos(a);return new m({x:b.x,y:b.y*a+b.z*c,z:b.z*a-b.y*c})};var p=32.932*DEG2RAD,v=192.859508*
DEG2RAD,q=27.128336*DEG2RAD;m.prototype.gal2equ=function(){var a=this.sph(),b=a.l,c=a.b,a=Math.sin(c),c=Math.cos(c),d=Math.sin(q),e=Math.cos(q),f=c*Math.sin(b-p),g=Math.asin(a*d+f*e);return{l:CYCLE(Math.atan2(c*Math.cos(b-p),a*e-f*d)+v),b:TURN(g)}};m.prototype.equ2gal=function(){var a=this.sph(),b=a.l,c=a.b,a=Math.sin(c),c=Math.cos(c),d=Math.sin(q),e=Math.cos(q),f=Math.cos(v-b),g=Math.asin(a*d+c*e*f);return{l:CYCLE(p-Math.atan2(Math.sin(v-b),f*d-a/c*e)-E/2),b:TURN(g)}};var w=2306.2181*DEG2RAD,t=1.39656*
DEG2RAD,r=1.39E-4*DEG2RAD,x=.30188*DEG2RAD,y=3.44E-4*DEG2RAD,z=.017998*DEG2RAD,B=1.09468*DEG2RAD,C=6.6E-5*DEG2RAD,D=.018203*DEG2RAD,A=2004.3109*DEG2RAD,G=.8533*DEG2RAD,M=.42665*DEG2RAD,O=2.17E-4*DEG2RAD,P=.041833*DEG2RAD;m.prototype.precess=function(a,b){var c=this.l,d=this.b,e=(a-b)/36E4,f=e*e,g=f*e;if(e){var h=b/36E4;var k=h*h;var l=(w+t*h-r*k)*e+(B+C*h)*f+D*g;var m=(w+t*h-r*k)*e+(x-y*h)*f+z*g;h=(A-G*h-O*k)*e-(M+O*h)*f-P*g}else l=w*e+B*f+P*g,m=w*e+x*f+z*g,h=A*e-O*f-P*g;e=Math.cos(d);k=e*Math.cos(c+
m);c=e*Math.sin(c+m);m=Math.cos(h)*k-Math.sin(h)*Math.sin(d);h=Math.sin(h)*k+Math.cos(h)*Math.sin(d);l=Math.atan2(c,m)+l;d>.4*E||d<-.4*E?(c=Math.acos(Math.sqrt(c*c+m*m)),0>d&&(c*=-1)):c=Math.asin(h);d={l:CYCLE(l),b:TURN(c)};"r"in this&&(d.r=this.r);return d};a.Coord=m})(this)}).call(this,this);

/* crc: 06E39DED288C1CB3FD25EAE7E4949CDD */
