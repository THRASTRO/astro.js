/* autogenerated by webmerge (compile context) */
;
/*
Astronomical Calculations (https://github.com/mgreter/astro.js)
- Copyright (c) 2017 Marcel Greter (http://github.com/mgreter)
*/;
/* Vector3 implementation included */;
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(d,k,g){d!=Array.prototype&&d!=Object.prototype&&(d[k]=g.value)};$jscomp.getGlobal=function(d){return"undefined"!=typeof window&&window===d?d:"undefined"!=typeof global&&null!=global?global:d};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(d,k,g,f){if(k){g=$jscomp.global;d=d.split(".");for(f=0;f<d.length-1;f++){var l=d[f];l in g||(g[l]={});g=g[l]}d=d[d.length-1];f=g[d];k=k(f);k!=f&&null!=k&&$jscomp.defineProperty(g,d,{configurable:!0,writable:!0,value:k})}};$jscomp.polyfill("Math.cbrt",function(d){return d?d:function(d){if(0===d)return d;d=Number(d);var g=Math.pow(Math.abs(d),1/3);return 0>d?-g:g}},"es6-impl","es3");
(function(d){"undefined"==typeof d.THREE&&(d.THREE={});THREE.Vector3=function(a,b,c){this.x=a||0;this.y=b||0;this.z=c||0};THREE.Vector3.prototype={constructor:THREE.Vector3,set:function(a,b,c){this.x=a;this.y=b;this.z=c;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setZ:function(a){this.z=a;return this},copy:function(a){this.x=a.x;this.y=a.y;this.z=a.z;return this},clone:function(){return new THREE.Vector3(this.x,this.y,this.z)},add:function(a,b){this.x=
a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;return this},addSelf:function(a){this.x+=a.x;this.y+=a.y;this.z+=a.z;return this},addScalar:function(a){this.x+=a;this.y+=a;this.z+=a;return this},sub:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z;return this},subSelf:function(a){this.x-=a.x;this.y-=a.y;this.z-=a.z;return this},multiply:function(a,b){this.x=a.x*b.x;this.y=a.y*b.y;this.z=a.z*b.z;return this},multiplySelf:function(a){this.x*=a.x;this.y*=a.y;this.z*=a.z;return this},multiplyScalar:function(a){this.x*=
a;this.y*=a;this.z*=a;return this},divideSelf:function(a){this.x/=a.x;this.y/=a.y;this.z/=a.z;return this},divideScalar:function(a){a?(this.x/=a,this.y/=a,this.z/=a):this.z=this.y=this.x=0;return this},negate:function(){return this.multiplyScalar(-1)},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.lengthSq())},lengthManhattan:function(){return this.x+this.y+this.z},normalize:function(){return this.divideScalar(this.length())},
setLength:function(a){return this.normalize().multiplyScalar(a)},cross:function(a,b){this.x=a.y*b.z-a.z*b.y;this.y=a.z*b.x-a.x*b.z;this.z=a.x*b.y-a.y*b.x;return this},crossSelf:function(a){var b=this.x,c=this.y,e=this.z;this.x=c*a.z-e*a.y;this.y=e*a.x-b*a.z;this.z=b*a.y-c*a.x;return this},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){return(new THREE.Vector3).sub(this,a).lengthSq()},setPositionFromMatrix:function(a){this.x=a.n14;this.y=a.n24;this.z=
a.n34},setRotationFromMatrix:function(a){var b=Math.cos(this.y);this.y=Math.asin(a.n13);1E-5<Math.abs(b)?(this.x=Math.atan2(-a.n23/b,a.n33/b),this.z=Math.atan2(-a.n12/b,a.n11/b)):(this.x=0,this.z=Math.atan2(a.n21,a.n22))},isZero:function(){return 1E-4>this.lengthSq()}};THREE.Vector3=function(a,b,c){this.x=a||0;this.y=b||0;this.z=c||0};THREE.Vector3.prototype={constructor:THREE.Vector3,set:function(a,b,c){this.x=a;this.y=b;this.z=c;return this},setScalar:function(a){this.z=this.y=this.x=a;return this},
setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setZ:function(a){this.z=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;case 2:this.z=b;break;default:throw Error("index is out of range: "+a);}},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw Error("index is out of range: "+a);}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(a){this.x=
a.x;this.y=a.y;this.z=a.z;return this},add:function(a,b){if(void 0!==b)return console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;this.z+=a.z;return this},addScalar:function(a){this.x+=a;this.y+=a;this.z+=a;return this},addVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;return this},addScaledVector:function(a,b){this.x+=a.x*b;this.y+=a.y*b;this.z+=a.z*b;return this},sub:function(a,b){if(void 0!==
b)return console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,b);this.x-=a.x;this.y-=a.y;this.z-=a.z;return this},subScalar:function(a){this.x-=a;this.y-=a;this.z-=a;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z;return this},multiply:function(a,b){if(void 0!==b)return console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(a,
b);this.x*=a.x;this.y*=a.y;this.z*=a.z;return this},multiplyScalar:function(a){isFinite(a)?(this.x*=a,this.y*=a,this.z*=a):this.z=this.y=this.x=0;return this},multiplyVectors:function(a,b){this.x=a.x*b.x;this.y=a.y*b.y;this.z=a.z*b.z;return this},applyEuler:function(){var a;return function(b){!1===b instanceof THREE.Euler&&console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order.");void 0===a&&(a=new THREE.Quaternion);this.applyQuaternion(a.setFromEuler(b));
return this}}(),applyAxisAngle:function(){var a;return function(b,c){void 0===a&&(a=new THREE.Quaternion);this.applyQuaternion(a.setFromAxisAngle(b,c));return this}}(),applyMatrix3:function(a){var b=this.x,c=this.y,e=this.z;a=a.elements;this.x=a[0]*b+a[3]*c+a[6]*e;this.y=a[1]*b+a[4]*c+a[7]*e;this.z=a[2]*b+a[5]*c+a[8]*e;return this},applyMatrix4:function(a){var b=this.x,c=this.y,e=this.z;a=a.elements;this.x=a[0]*b+a[4]*c+a[8]*e+a[12];this.y=a[1]*b+a[5]*c+a[9]*e+a[13];this.z=a[2]*b+a[6]*c+a[10]*e+a[14];
return this},applyProjection:function(a){var b=this.x,c=this.y,e=this.z;a=a.elements;var m=1/(a[3]*b+a[7]*c+a[11]*e+a[15]);this.x=(a[0]*b+a[4]*c+a[8]*e+a[12])*m;this.y=(a[1]*b+a[5]*c+a[9]*e+a[13])*m;this.z=(a[2]*b+a[6]*c+a[10]*e+a[14])*m;return this},applyQuaternion:function(a){var b=this.x,c=this.y,e=this.z,m=a.x,r=a.y,q=a.z;a=a.w;var d=a*b+r*e-q*c,f=a*c+q*b-m*e,g=a*e+m*c-r*b,b=-m*b-r*c-q*e;this.x=d*a+b*-m+f*-q-g*-r;this.y=f*a+b*-r+g*-m-d*-q;this.z=g*a+b*-q+d*-r-f*-m;return this},project:function(){var a;
return function(b){void 0===a&&(a=new THREE.Matrix4);a.multiplyMatrices(b.projectionMatrix,a.getInverse(b.matrixWorld));return this.applyProjection(a)}}(),unproject:function(){var a;return function(b){void 0===a&&(a=new THREE.Matrix4);a.multiplyMatrices(b.matrixWorld,a.getInverse(b.projectionMatrix));return this.applyProjection(a)}}(),transformDirection:function(a){var b=this.x,c=this.y,e=this.z;a=a.elements;this.x=a[0]*b+a[4]*c+a[8]*e;this.y=a[1]*b+a[5]*c+a[9]*e;this.z=a[2]*b+a[6]*c+a[10]*e;this.normalize();
return this},divide:function(a){this.x/=a.x;this.y/=a.y;this.z/=a.z;return this},divideScalar:function(a){return this.multiplyScalar(1/a)},min:function(a){this.x=Math.min(this.x,a.x);this.y=Math.min(this.y,a.y);this.z=Math.min(this.z,a.z);return this},max:function(a){this.x=Math.max(this.x,a.x);this.y=Math.max(this.y,a.y);this.z=Math.max(this.z,a.z);return this},clamp:function(a,b){this.x=Math.max(a.x,Math.min(b.x,this.x));this.y=Math.max(a.y,Math.min(b.y,this.y));this.z=Math.max(a.z,Math.min(b.z,
this.z));return this},clampScalar:function(){var a,b;return function(c,e){void 0===a&&(a=new THREE.Vector3,b=new THREE.Vector3);a.set(c,c,c);b.set(e,e,e);return this.clamp(a,b)}}(),clampLength:function(a,b){var c=this.length();this.multiplyScalar(Math.max(a,Math.min(b,c))/c);return this},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);return this},
round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);return this},roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z);return this},negate:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;return this},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},
length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(a){return this.multiplyScalar(a/this.length())},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;this.z+=(a.z-this.z)*b;return this},lerpVectors:function(a,b,c){this.subVectors(b,a).multiplyScalar(c).add(a);return this},cross:function(a,b){if(void 0!==
b)return console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(a,b);var c=this.x,e=this.y,m=this.z;this.x=e*a.z-m*a.y;this.y=m*a.x-c*a.z;this.z=c*a.y-e*a.x;return this},crossVectors:function(a,b){var c=a.x,e=a.y,m=a.z,r=b.x,q=b.y,d=b.z;this.x=e*d-m*q;this.y=m*r-c*d;this.z=c*q-e*r;return this},projectOnVector:function(){var a,b;return function(c){void 0===a&&(a=new THREE.Vector3);a.copy(c).normalize();b=this.dot(a);return this.copy(a).multiplyScalar(b)}}(),
projectOnPlane:function(){var a;return function(b){void 0===a&&(a=new THREE.Vector3);a.copy(this).projectOnVector(b);return this.sub(a)}}(),reflect:function(){var a;return function(b){void 0===a&&(a=new THREE.Vector3);return this.sub(a.copy(b).multiplyScalar(2*this.dot(b)))}}(),angleTo:function(a){a=this.dot(a)/Math.sqrt(this.lengthSq()*a.lengthSq());return Math.acos(THREE.Math.clamp(a,-1,1))},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){var b=
this.x-a.x,c=this.y-a.y;a=this.z-a.z;return b*b+c*c+a*a},setFromSpherical:function(a){var b=Math.sin(a.phi)*a.radius;this.x=b*Math.sin(a.theta);this.y=Math.cos(a.phi)*a.radius;this.z=b*Math.cos(a.theta);return this},setFromMatrixPosition:function(a){return this.setFromMatrixColumn(a,3)},setFromMatrixScale:function(a){var b=this.setFromMatrixColumn(a,0).length(),c=this.setFromMatrixColumn(a,1).length();a=this.setFromMatrixColumn(a,2).length();this.x=b;this.y=c;this.z=a;return this},setFromMatrixColumn:function(a,
b){"number"===typeof a&&(console.warn("THREE.Vector3: setFromMatrixColumn now expects ( matrix, index )."),b=a=b);return this.fromArray(a.elements,4*b)},equals:function(a){return a.x===this.x&&a.y===this.y&&a.z===this.z},fromArray:function(a,b){void 0===b&&(b=0);this.x=a[b];this.y=a[b+1];this.z=a[b+2];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this.x;a[b+1]=this.y;a[b+2]=this.z;return a},fromAttribute:function(a,b,c){void 0===c&&(c=0);b=b*a.itemSize+c;this.x=a.array[b];
this.y=a.array[b+1];this.z=a.array[b+2];return this}};var k=1*Math.PI,g=2*Math.PI,f=this.AstroJS={AU2M:149597870700,AU2KM:1.495978707E8,PC2M:30856776E9,PC2AU:206265,PC2LY:3.26156,KM2M:1E3,JY2JD:365.25,JD2SEC:86400,MSOL2KG:1.98855E30,DEG2RAD:g/360},l;for(l in f)d=l.split("2",2).reverse().join("2"),f[d]=1/f[l];f.exportConstants=function(a){for(var b in f)a[b]=f[b]};f.DMS2RAD=function(a,b,c){return(0>a?-1:1)*(Math.abs(a)+(b/60+c/60/60))*DEG2RAD};f.HMS2RAD=function(a,b,c){return 15*DMS2RAD(a,b,c)};f.PI=
k;f.TAU=g;f.JD2000=2451545;var x=f.GMJD={sun:2.959122083684144E-4,mer:4.912547451450812E-11,ven:7.243452486162703E-10,ear:8.997011603631609E-10,emb:8.997011603631609E-10,mar:9.549535105779258E-11,jup:2.825345842083778E-7,sat:8.459715185680659E-8,ura:1.2920249167819694E-8,nep:1.5243589007842763E-8,plu:2.1886997654259697E-12};d=f.GMJY={};for(l in x)d[l]=x[l],d[l]*=133407.5625;f.CYCLE=function(a){a%=g;0>a&&(a+=g);return a};f.TURN=function(a){a%=g;a>k&&(a-=g);return a};f.JD2J2K=function(a){return(a-2451545)/
365.25};f.J2K2JD=function(a){return 365.25*a+2451545};f.exportConstants(this);Math.cbrt=Math.cbrt||function(a){var b=Math.pow(Math.abs(a),1/3);return 0>a?-b:b};Math.fmod=Math.fmod||function(a,b){return a%b};"undefined"!=typeof THREE&&(this.Vector3=THREE.Vector3);"use strict";(function(a){function b(a){if(a.empty)return this;this._G=a.G||b.GMP.sun;this._t=a.epoch||a.t||0;this.translate=a.translate||null;"x"in a&&"y"in a&&"z"in a?this._r=new Vector3(a.x,a.y,a.z):"rx"in a&&"ry"in a&&"rz"in a&&(this._r=
new Vector3(a.rx,a.ry,a.rz));"X"in a&&"Y"in a&&"Z"in a?this._v=new Vector3(a.X,a.Y,a.Z):"vx"in a&&"vy"in a&&"vz"in a&&(this._v=new Vector3(a.vx,a.vy,a.vz));if("r"in a&&"v"in a){var c=a.r,e=a.v;this._r=new Vector3(c.x,c.y,c.z);this._v=new Vector3(e.x,e.y,e.z)}this.vectors=!(!this._r||!this._v);var c="aeiMnPLcCwWOkhqpG".split(""),d;for(d in c)a.hasOwnProperty(c[d])&&(this["_"+c[d]]=a[c[d]]);"name"in a&&(this.name=a.name);this.lazy||(this.updateElements(),this.requireElements())}b.GMP=x;var c=b.prototype;
c.clone=function(a){var c=new b({empty:!0});a&&(delete this._v,delete this._r);for(var e in this)this.hasOwnProperty(e)&&(c[e]=this[e]&&"function"==typeof this[e].clone?this[e].clone():this[e]);a&&c.update(a);return c};c.checkElements=function(a){if(!this.elements)throw"Orbitals not calculated";if(!("_i"in this))throw"Orbit is missing inclination (i)";if(!("_e"in this))throw"Orbit is missing eccentricity (e)";if(!("_a"in this))throw"Orbit is missing semi-major axis (a)";if(!("_b"in this))throw"Orbit is missing semi-minor axis (b)";
if(!("_l"in this))throw"Orbit is missing semi-latus rectum (l)";if(!("_c"in this))throw"Orbit is missing periapsis (c)";if(!("_C"in this))throw"Orbit is missing apoapsis (C)";if(!("_L"in this))throw"Orbit is missing mean longitude (L)";if(!("_O"in this))throw"Orbit is missing right ascending node (O)";if(!("_T"in this))throw"Orbit is missing time of periapsis (w)";if(!("_w"in this))throw"Orbit is missing argument of periapsis (w)";if(!("_W"in this))throw"Orbit is missing longitude of the periapsis (W)";
if(!("_n"in this))throw"Orbit is missing mean motion (n)";if(!("_M"in this))throw"Orbit is missing mean anomaly (M)";if(!("_P"in this))throw"Orbit is missing orbital period (P)";if(!("_A"in this))throw"Orbit is missing angular momentum (A)";if(!("_c"in this))throw"Orbit is missing pericenter (c)";if(!("_C"in this))throw"Orbit is missing apocenter (C)";if(0>this._e)throw"Negative eccentricity is invalid";if(1<this._e)throw"Eccentricity must not be hyperbolic (> 1)";if(1==this._e)throw"Eccentricity must not be parabolic (== 1)";
if(a&&!("_m"in this))throw"Orbit is missing true anomaly (m)";if(a&&!("_B"in this))throw"Orbit is missing radial velocity (B)";if(a&&!("_E"in this))throw"Orbit is missing eccentric anomaly (E)";};c.requireElements=function(a){this.updateElements(a);this.checkElements(a);return this};c.updateElements=function(a){if(this.elements)return this;this.elements=!0;if("_r"in this&&"_v"in this){var b=this._r,c=this._v,e=this._G,d=b.length();this._A3=b.clone().cross(c);this._A2=this._A3.lengthSq();this._A=Math.sqrt(this._A2);
this._B=b.dot(c)/d;var f=this._e3=b.clone().multiplyScalar(c.lengthSq()-e/d).sub(c.clone().multiplyScalar(d*this._B)).multiplyScalar(1/e),c=f.lengthSq(),c=this._e=Math.sqrt(c);this._i=Math.acos(this._A3.z/this._A);this._l=this._A2/e;this._c=this._l/(1+c);this._C=this._l/(1-c);this._a=(this._C+this._c)/2;var e=-this._A3.y,w=+this._A3.x,h=Math.sqrt(e*e+w*w),n=0==h?0:Math.acos(e/h);this._O=0>w?g-n:n;n=e*f.x+w*f.y;this._w=0===h||0===c?0:Math.acos(n/h/c);0>f.z&&(this._w*=-1);b=0===c&&0===h?Math.acos(b.x/
d):0===c?Math.acos((e*b.x+w*b.y)/(h*d)):Math.acos((f.x*b.x+f.y*b.y+f.z*b.z)/c/d);b=this._m=0>this._B?g-b:b;b=this._E=CYCLE(Math.atan2(Math.sqrt(1-c*c)*Math.sin(b),c+Math.cos(b)));this._M=b-c*Math.sin(b)}"_k"in this&&"_h"in this&&(this._W=Math.atan2(this._h,this._k),this._e=this._h/Math.sin(this._W));"_q"in this&&"_p"in this&&(this._O=Math.atan2(this._p,this._q),this._i=2*Math.asin((this._p-this._q)/(-Math.sqrt(2)*Math.sin(k/4-this._O))));"_n"in this&&!("_a"in this)&&(this._a=Math.cbrt(this._G/this._n/
this._n));"_P"in this&&!("_a"in this)&&(c=this._P/g,this._a=Math.cbrt(this._G*c*c));"_a"in this||("_c"in this&&"_C"in this?this._a=(this._C+this._c)/2:"_e"in this&&"_C"in this?this._a=this._C/(1+this._e):"_c"in this&&"_e"in this&&(this._a=this._c/(1-this._e)));"_e"in this||("_c"in this&&"_C"in this?this._e=1-this._c/this._a:"_a"in this&&"_C"in this?this._e=this._C/this._a-1:"_c"in this&&"_a"in this&&(this._e=1-this._c/this._a));"_e"in this?(c=1-this._e*this._e,"_a"in this?(this._l=this._a*c,this._b=
Math.sqrt(this._a*this._l)):"_b"in this?(this._a=this._b/Math.sqrt(c),this._l=this._a*c):"_l"in this&&(this._a=this._l/c,this._b=Math.sqrt(this._a*this._l))):"_a"in this?"_b"in this?(this._l=this._b*this._b/this._a,this._e=Math.sqrt(1-this._l/this._a)):"_l"in this&&(this._e=Math.sqrt(1-this._l/this._a),this._b=Math.sqrt(this._a*this._l)):"_b"in this&&"_l"in this&&(this.a=this._b*this._b/this._l,this._e=Math.sqrt(1-this._l/this._a));"_a"in this&&!("_P"in this)&&(this._P=g/Math.sqrt(this._G)*Math.pow(this._a,
1.5));"_P"in this&&!("_n"in this)&&(this._n=g/this._P);"_P"in this&&!("_A"in this)&&"_a"in this&&"_b"in this&&(this._A=g*this._a*this._b/this._P);"_a"in this&&"_e"in this&&("_c"in this||(this._c=this._a*(1-this._e)),"_C"in this||(this._C=this._a*(1+this._e)));if("_L"in this)if("_M"in this)this._W=this._L-this._M,"_O"in this?this._w=this._W-this._O:"_w"in this&&(this._O=this._W-this._w);else if("_W"in this)this._M=this._L-this._W,"_O"in this?this._w=this._W-this._O:"_w"in this&&(this._O=this._W-this._w);
else if("_O"in this&&"_w"in this)this._W=this._O+this._w,this._M=this._L-this._W;else throw"Orbit incomplete";else if("_O"in this)if("_w"in this)this._W=this._O+this._w,"_M"in this&&(this._L=this._M+this._W);else if("_W"in this)this._w=this._W-this._O,"_M"in this&&(this._L=this._M+this._W);else throw"Orbit incomplete";else"_M"in this&&"_w"in this&&"_W"in this&&(this._L=this._W+this._M,this._O=this._W-this._w);a&&this.m();"_W"in this&&(this._W=TURN(this._W));"_L"in this&&(this._L=CYCLE(this._L));"_M"in
this&&(this._M=CYCLE(this._M));"_O"in this&&(this._O=CYCLE(this._O));"_w"in this&&(this._w=TURN(this._w));"_M"in this&&(this._T=-this._M/this._n);return this};c.E=function(a){if("_E"in this&&!a)return this._E;var b=this._e,c=this._m,e=this._M;if(!a&&null!=b&&null!=c)return this._E=CYCLE(Math.atan2(Math.sqrt(1-b*b)*Math.sin(c),b+Math.cos(c)));if(null!=b&&null!=e){a&&(e=CYCLE(this._n*(a-this._T-this._t)));var c=.8>b?e:k;var d=1;for(var f=0;1E-12<Math.abs(d)&&12>f;++f){d=e-c+b*Math.sin(c);var g=b*Math.cos(c)-
1;d/=g;c-=d}c=CYCLE(c);a||(this._E=c);return c}throw"Invalid orbital state";};c.m=function(a){if(0===arguments.length){if("_m"in this)return this._m;var b=this.E()/2;return this._m=CYCLE(2*Math.atan2(Math.sqrt(1+this._e)*Math.sin(b),Math.sqrt(1-this._e)*Math.cos(b)))}return CYCLE(2*Math.atan2(Math.sqrt(1+this._e)*Math.sin(a/2),Math.sqrt(1-this._e)*Math.cos(a/2)))};c.B=function(){if("_B"in this)return this._B;var a=this.r(),b=this.v();return this._B=a.dot(b)/a.length()};c.e3=function(){if("_e3"in this)return this._e3;
var a=this.r(),b=this.v();if(null!==a&&null!==b)return this._e3=a.clone().multiplyScalar(b.lengthSq()-this._G/a.length()).sub(b.clone().multiplyScalar(a.length()*this.B())).multiplyScalar(1/this._G)};c.i=function(){return this._i};c.e=function(){return this._e};c.a=function(){return this._a};c.b=function(){return this._b};c.l=function(){return this._l};c.C=function(){return this._C};c.c=function(){return this._c};c.L=function(){return this._L};c.O=function(){return this._O};c.w=function(){return this._w};
c.T=function(){return this._T};c.W=function(){return this._W};c.n=function(){return this._n};c.A=function(){return this._A};c.M=function(){return this._M};c.P=function(){return this._P};c.q=function(){return"_q"in this?this._q:this._q=Math.cos(this._O)*Math.sin(this._i/2)};c.p=function(){return"_p"in this?this._p:this._p=Math.sin(this._O)*Math.sin(this._i/2)};c.k=function(){return"_k"in this?this._k:this._k=this._e*Math.cos(this._W)};c.h=function(){return"_h"in this?this._h:this._h=this._e*Math.sin(this._W)};
c.update=function(a){this.elements||this.resolveElements(!0);this._M=CYCLE(this._n*(a-this._T));this._L=CYCLE(this._M+this._W);delete this._E;delete this._m;delete this._r;delete this._v;return this};c.state=function(a){this.elements||this.resolveElements(!0);a=a||0;if(!a&&"_r"in this&&"_v"in this)return{r:this._r,v:this._v,time:a,orbit:this};var b=this._e,c=this._a,e=this._i,d=this._O,f=this._w,g=this.E(a),h=this.m(g),n=c*(1-b*Math.cos(g)),k=Math.sqrt(this._G*c)/n,c=n*Math.cos(h),n=n*Math.sin(h),
h=k*-Math.sin(g),b=k*Math.sqrt(1-b*b)*Math.cos(g),k=Math.sin(d),p=Math.cos(d),d=Math.sin(e),l=Math.cos(e),u=Math.sin(f),v=Math.cos(f),f=v*p-u*k*l,e=v*k+u*p*l,g=v*k*l+u*p,k=v*p*l-u*k,p=u*d,d=v*d,n=new Vector3(c*f-n*g,c*e+n*k,c*p+n*d),c=new Vector3(h*f-b*g,h*e+b*k,h*p+b*d);a||(this._r=n,this._v=c);return{r:n,v:c,time:a,orbit:this}};c.r=function(a){return this.state(a).r};c.v=function(a){return this.state(a).v};c.inclination=c.i;c.eccentricity=c.e;c.semiMajorAxis=c.a;c.semiMinorAxis=c.b;c.semilatusRectum=
c.l;c.meanLongitude=c.L;c.ascendingNode=c.O;c.argOfPericenter=c.w;c.timeOfPericenter=c.T;c.longitudeOfPericenter=c.W;c.meanMotion=c.n;c.meanAnomaly=c.M;c.orbitalPeriod=c.P;c.angularMomentum=c.A;c.trueAnomaly=c.m;c.radialVelocity=c.B;c.eccentricAnomaly=c.E;c.apoapsis=c.C;c.aphelion=c.C;c.apocenter=c.C;c.periapsis=c.c;c.perhelion=c.c;c.pericenter=c.c;c.position=c.r;c.velocity=c.v;a.Orbit=a.Orbital=b})(this);"use strict";(function(a){function b(a){a=e(a);for(var b=JD2J2K(a)/100,c=b*b,d=c*b,L=l+w*b+h*
c+n*d,P=z+p*b+y*c+u*d,f=v+C*b+x*c+D*d,N=E+H*b+I*c+F*d,M=J+K*b+A*c+B*d,m=a=0,G,r,q,t=0;t<k.length;t++)G=k[t][0]+k[t][1]*b,r=k[t][2]+k[t][3]*b,q=g[t][0]*L+g[t][1]*P+g[t][2]*f+g[t][3]*N+g[t][4]*M,a+=G*Math.sin(q),m+=r*Math.cos(q);b=(23+26/60+21.448/3600-46.815/3600*b-5.9E-4/3600*c+.001813/3600*d)*DEG2RAD;a/=36E6/DEG2RAD;m/=36E6/DEG2RAD;return{longitude:TURN(a),obliquity:TURN(m),ecliptic:CYCLE(b)}}function c(a){if(2067314.5>a)return a=(a-2067314.5)/36525,1830-405*a+46.5*a*a;if(2067314.5<=a&&2305447.5>
a)return a=(a-2396758.5)/36525,22.5*a*a;if(2312752.5<=a&&2448622.5>a){var b=Math.floor((a-2312752.5)/730.5);b>f.length-2&&(b=f.length-2);var c=f[b+1]-f[b],d=f[b+2]-f[b+1];a=(a-(2312752.5+730.5*b))/730.5;return f[b+1]+a/2*(c+d+a*(c-d))}if(2448622.5<=a&&2455197.5>=a)return b=[56.86,63.83,70],c=b[1]-b[0],d=b[2]-b[1],a=(a-2451544.5)/3652.5,b[1]+a/2*(c+d+a*(d-c));a-=2382148;return-15+a*a/41048480}function e(a){return a+c(a)/JD2SEC}function d(a){var b=JD2J2K(a)/100;return CYCLE(L+M*(a-2451545)+N*b*b+G*
b*b*b)}var f=[124,115,106,98,91,85,79,74,70,65,62,58,55,53,50,48,46,44,42,40,37,35,33,31,28,26,24,22,20,18,16,14,13,12,11,10,9,9,9,9,9,9,9,9,10,10,10,10,10,11,11,11,11,11,11,11,12,12,12,12,12,12,13,13,13,13,14,14,14,15,15,15,15,16,16,16,16,16,17,17,17,17,17,17,17,17,16,16,15,14,13.7,13.1,12.7,12.5,12.5,12.5,12.5,12.5,12.5,12.3,12,11.4,10.6,9.6,8.6,7.5,6.6,6,5.7,5.6,5.7,5.9,6.2,6.5,6.8,7.1,7.3,7.5,7.7,7.8,7.9,7.5,6.4,5.4,2.9,1.6,-1,-2.7,-3.6,-4.7,-5.4,-5.2,-5.5,-5.6,-5.8,-5.9,-6.2,-6.4,-6.1,-4.7,-2.7,
0,2.6,5.4,7.7,10.5,13.4,16,18.2,20.2,21.2,22.4,23.5,23.9,24.3,24,23.9,23.9,23.7,24,24.3,25.3,26.2,27.3,28.2,29.1,30,30.7,31.4,32.2,33.1,34,35,36.5,38.3,40.2,42.2,44.5,46.5,48.5,50.5,52.2,53.8,54.9,55.8,56.9,58.3],g=[[0,0,0,0,1],[-2,0,0,2,2],[0,0,0,2,2],[0,0,0,0,2],[0,1,0,0,0],[0,0,1,0,0],[-2,1,0,2,2],[0,0,0,2,1],[0,0,1,2,2],[-2,-1,0,2,2],[-2,0,1,0,0],[-2,0,0,2,1],[0,0,-1,2,2],[2,0,0,0,0],[0,0,1,0,1],[2,0,-1,2,2],[0,0,-1,0,1],[0,0,1,2,1],[-2,0,2,0,0],[0,0,-2,2,1],[2,0,0,2,2],[0,0,2,2,2],[0,0,2,0,0],
[-2,0,1,2,2],[0,0,0,2,0],[-2,0,0,2,0],[0,0,-1,2,1],[0,2,0,0,0],[2,0,-1,0,1],[-2,2,0,2,2],[0,1,0,0,1],[-2,0,1,0,1],[0,-1,0,0,1],[0,0,2,-2,0],[2,0,-1,2,1],[2,0,1,2,2],[0,1,0,2,2],[-2,1,1,0,0],[0,-1,0,2,2],[2,0,0,2,1],[2,0,1,0,0],[-2,0,2,2,2],[-2,0,1,2,1],[2,0,-2,0,1],[2,0,0,0,1],[0,-1,1,0,0],[-2,-1,0,2,1],[-2,0,0,0,1],[0,0,2,2,1],[-2,0,2,0,1],[-2,1,0,2,1],[0,0,1,-2,0],[-1,0,1,0,0],[-2,1,0,0,0],[1,0,0,0,0],[0,0,1,2,0],[0,0,-2,2,2],[-1,-1,1,0,0],[0,1,1,0,0],[0,-1,1,2,2],[2,-1,-1,2,2],[0,0,3,2,2],[2,-1,
0,2,2]],k=[[-171996,-174.2,92025,8.9],[-13187,-1.6,5736,-3.1],[-2274,-.2,977,-.5],[2062,.2,-895,.5],[1426,-3.4,54,-.1],[712,.1,-7,0],[-517,1.2,224,-.6],[-386,-.4,200,0],[-301,0,129,-.1],[217,-.5,-95,.3],[-158,0,0,0],[129,.1,-70,0],[123,0,-53,0],[63,0,0,0],[63,.1,-33,0],[-59,0,26,0],[-58,-.1,32,0],[-51,0,27,0],[48,0,0,0],[46,0,-24,0],[-38,0,16,0],[-31,0,13,0],[29,0,0,0],[29,0,-12,0],[26,0,0,0],[-22,0,0,0],[21,0,-10,0],[17,-.1,0,0],[16,0,-8,0],[-16,.1,7,0],[-15,0,9,0],[-13,0,7,0],[-12,0,6,0],[11,0,
0,0],[-10,0,5,0],[-8,0,3,0],[7,0,-3,0],[-7,0,0,0],[-7,0,3,0],[-7,0,3,0],[6,0,0,0],[6,0,-3,0],[6,0,-3,0],[-6,0,3,0],[-6,0,3,0],[5,0,0,0],[-5,0,3,0],[-5,0,3,0],[-5,0,3,0],[4,0,0,0],[4,0,0,0],[4,0,0,0],[-4,0,0,0],[-4,0,0,0],[-4,0,0,0],[3,0,0,0],[-3,0,0,0],[-3,0,0,0],[-3,0,0,0],[-3,0,0,0],[-3,0,0,0],[-3,0,0,0],[-3,0,0,0]],l=297.85036*DEG2RAD,w=445267.11148*DEG2RAD,h=-.0019142*DEG2RAD,n=DEG2RAD/189474,z=357.52772*DEG2RAD,p=35999.05034*DEG2RAD,y=-.0086972*DEG2RAD,u=-DEG2RAD/3E5,v=134.96298*DEG2RAD,C=477198.867398*
DEG2RAD,x=.0086972*DEG2RAD,D=DEG2RAD/56250,E=93.27191*DEG2RAD,H=483202.017538*DEG2RAD,I=-.0036825*DEG2RAD,F=DEG2RAD/327270,J=125.04452*DEG2RAD,K=-1934.136261*DEG2RAD,A=.0020708*DEG2RAD,B=DEG2RAD/45E4,L=280.46061837*DEG2RAD,M=360.98564736629*DEG2RAD,N=3.87933E-4*DEG2RAD,G=-DEG2RAD/3871E4;a.JD2JDE=e;a.JDE2JD=function(a){return a-c(a)/JD2SEC};a.getMeanSiderealTime=d;a.getApparentSiderealTime=function(a){var c=b(a);return d(a)+c.longitude/1*Math.cos(c.obliquity)};a.getNutation=b})(this);"use strict";
(function(a){function b(){return{p:this.p,l:this.l,z:this.z}}function c(){return{x:this.x,y:this.y,z:this.z}}function d(){return{l:this.l,b:this.b,i:this.i,r:this.r}}function f(){this.r=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z);this.i=Math.acos(this.z/this.r);this.b=k/2-this.i;this.l=Math.atan2(this.y,this.x);return(this.sph=d).call(this)}function g(){var a=this.r*Math.sin(this.i);this.x=a*Math.cos(this.l);this.y=a*Math.sin(this.l);this.z=this.r*Math.cos(this.i);return(this.cart=c).call(this)}
function l(){this.p=Math.sqrt(this.x*this.x+this.y*this.y);this.l=Math.atan2(this.y,this.x);return(this.cyl=b).call(this)}function x(){this.x=this.p*Math.cos(this.l);this.y=this.p*Math.sin(this.l);return(this.cart=c).call(this)}function O(){this.i=Math.atan2(this.p,this.z);this.b=k/2-this.i;this.r=Math.sqrt(this.p*this.p+this.z*this.z);return(this.sph=d).call(this)}function w(){this.p=this.r*Math.cos(this.b);this.z=this.r*Math.sin(this.b);return(this.cyl=b).call(this)}function h(a){"ra"in a&&(a.l=
a.ra);"dec"in a&&(a.b=a.dec);"dist"in a&&(a.r=a.dist);"x"in a&&"y"in a&&"z"in a?(this.x=a.x,this.y=a.y,this.z=a.z,this.cart=c,this.sph=f,this.cyl=l):"p"in a&&"l"in a&&"z"in a?(this.p=a.p,this.l=a.l,this.z=a.z,this.cart=x,this.sph=O,this.cyl=b):"l"in a&&(this.l=a.l,this.r=a.r||1,"i"in a||"b"in a)&&(this.cart=g,this.sph=d,this.cyl=w,"b"in a?(this.b=a.b,this.i=k/2-this.b):"i"in a&&(this.i=a.i,this.b=k/2-this.i))}h.prototype.ecl2equ=function(a){var b=this.cart(),c=Math.sin(a);a=Math.cos(a);return new h({x:b.x,
y:b.y*a-b.z*c,z:b.z*a+b.y*c})};h.prototype.equ2ecl=function(a){var b=this.cart(),c=Math.sin(a);a=Math.cos(a);return new h({x:b.x,y:b.y*a+b.z*c,z:b.z*a-b.y*c})};var n=32.932*DEG2RAD,z=192.859508*DEG2RAD,p=27.128336*DEG2RAD;h.prototype.gal2equ=function(){var a=this.sph(),b=a.l,c=a.b,a=Math.sin(c),c=Math.cos(c),d=Math.sin(p),e=Math.cos(p),f=c*Math.sin(b-n),g=Math.asin(a*d+f*e);return{l:CYCLE(Math.atan2(c*Math.cos(b-n),a*e-f*d)+z),b:TURN(g)}};h.prototype.equ2gal=function(){var a=this.sph(),b=a.l,c=a.b,
a=Math.sin(c),c=Math.cos(c),d=Math.sin(p),e=Math.cos(p),f=Math.cos(z-b),g=Math.asin(a*d+c*e*f);return{l:CYCLE(n-Math.atan2(Math.sin(z-b),f*d-a/c*e)-k/2),b:TURN(g)}};var y=2306.2181*DEG2RAD,u=1.39656*DEG2RAD,v=1.39E-4*DEG2RAD,C=.30188*DEG2RAD,Q=3.44E-4*DEG2RAD,D=.017998*DEG2RAD,E=1.09468*DEG2RAD,H=6.6E-5*DEG2RAD,I=.018203*DEG2RAD,F=2004.3109*DEG2RAD,J=.8533*DEG2RAD,K=.42665*DEG2RAD,A=2.17E-4*DEG2RAD,B=.041833*DEG2RAD;h.prototype.precess=function(a,b){var c=this.l,d=this.b,e=(a-b)/36E4,f=e*e,g=f*e;
if(e){var h=b/36E4;var l=h*h;var n=(y+u*h-v*l)*e+(E+H*h)*f+I*g;var m=(y+u*h-v*l)*e+(C-Q*h)*f+D*g;h=(F-J*h-A*l)*e-(K+A*h)*f-B*g}else n=y*e+E*f+B*g,m=y*e+C*f+D*g,h=F*e-A*f-B*g;e=Math.cos(d);l=e*Math.cos(c+m);c=e*Math.sin(c+m);m=Math.cos(h)*l-Math.sin(h)*Math.sin(d);h=Math.sin(h)*l+Math.cos(h)*Math.sin(d);n=Math.atan2(c,m)+n;d>.4*k||d<-.4*k?(c=Math.acos(Math.sqrt(c*c+m*m)),0>d&&(c*=-1)):c=Math.asin(h);d={l:CYCLE(n),b:TURN(c)};"r"in this&&(d.r=this.r);return d};a.Coord=h})(this)}).call(this,this);

/* crc: 2131E75EC26667E0C3CDC9E173E7C2A3 */
